!function(d,b){var a=0,c=d(document);d.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",showCheckAll:!0,showUncheckAll:!0,selectedText:"# selected",selectedList:0,closeIcon:"ui-icon-circle-close",show:null,hide:null,autoOpen:!1,multiple:!0,position:{},appendTo:null,menuWidth:null,selectedListSeparator:", ",disableInputsOnToggle:!0,groupColumns:!1},_getAppendEl:function(){var f=this.options.appendTo;return f&&(f=f.jquery||f.nodeType?d(f):this.document.find(f).eq(0)),f&&f[0]||(f=this.element.closest(".ui-front, dialog")),f.length||(f=this.document[0].body),f},_create:function(){var f=this.element,g=this.options;this.speed=d.fx.speeds._default,this._isOpen=!1,this.inputIdCounter=0,this._namespaceID=this.eventNamespace||"multiselect"+a,this.multiselectID=a++;var h=(this.button=d('<button type="button"><span class="ui-icon ui-icon-triangle-1-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(g.classes).attr({title:f.attr("title"),tabIndex:f.attr("tabIndex"),id:f.attr("id")?f.attr("id")+"_ms":null}).prop("aria-haspopup",!0).insertAfter(f);this.buttonlabel=d("<span />").html(g.noneSelectedText).appendTo(h),this.menu=d("<div />").addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(g.classes).appendTo(this._getAppendEl()),this.header=d("<div />").addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(this.menu),this.headerLinkContainer=d("<ul />").addClass("ui-helper-reset").html(function(){if(!0===g.header){var j="";return g.showCheckAll&&(j='<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+g.checkAllText+"</span></a></li>"),g.showUncheckAll&&(j+='<li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+g.uncheckAllText+"</span></a></li>"),j}return"string"==typeof g.header?"<li>"+g.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon '+g.closeIcon+'"></span></a></li>').appendTo(this.header);(this.checkboxContainer=d("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(this.menu);this._bindEvents(),this.refresh(!0),g.multiple||this.menu.addClass("ui-multiselect-single"),f.hide()},_init:function(){!1===this.options.header&&this.header.hide(),this.options.multiple?this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").show():this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide(),this.options.autoOpen&&this.open(),this.element.is(":disabled")&&this.disable()},_makeOption:function(C){var w=C.title?C.title:null,D=C.value,k=this.element.attr("id")||this.multiselectID,v="ui-multiselect-"+this.multiselectID+"-"+(C.id||k+"-option-"+this.inputIdCounter++),A=C.disabled,j=C.selected,B=["ui-corner-all"],x=[],z=this.options;A&&(x.push("ui-multiselect-disabled"),B.push("ui-state-disabled")),C.className&&x.push(C.className),j&&!z.multiple&&B.push("ui-state-active");var f=d("<li/>").addClass(x.join(" ")),y=d("<label/>").attr({"for":v,title:w}).addClass(B.join(" ")).appendTo(f),g=d("<input/>").attr({name:"multiselect_"+k,type:z.multiple?"checkbox":"radio",value:D,title:w,id:v,checked:j?"checked":null,"aria-selected":j?"true":null,disabled:A?"disabled":null,"aria-disabled":A?"true":null}).data(d(C).data()).appendTo(y),q=d("<span/>").text(d(C).text());return g.data("image-src")&&q.prepend(d("<img/>").attr({src:g.data("image-src")})),q.appendTo(y),f},_buildOptionList:function(g,f){var h=this;g.children().each(function(){var j=d(this);if("OPTGROUP"===this.tagName){var k=d("<ul/>").addClass("ui-multiselect-optgroup "+this.className).appendTo(f);h.options.groupColumns&&k.addClass("ui-multiselect-columns"),d("<a/>").text(this.getAttribute("label")).appendTo(k),h._buildOptionList(j,k)}else{h._makeOption(this).appendTo(f)}})},refresh:function(g){var f=this.element,h=(this.options,this.menu),j=(this.checkboxContainer,d("<ul/>").addClass("ui-multiselect-checkboxes ui-helper-reset"));this.inputIdCounter=0,this.options.header&&(this.options.multiple?this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").show():this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide()),this._buildOptionList(f,j),this.menu.find(".ui-multiselect-checkboxes").remove(),this.menu.append(j),this.labels=h.find("label"),this.inputs=this.labels.children("input"),this._setButtonWidth(),this.update(!0),g||this._trigger("refresh")},update:function(j){var h,k=this.options,m=this.inputs,g=m.filter(":checked"),f=g.length;h=0===f?k.noneSelectedText:d.isFunction(k.selectedText)?k.selectedText.call(this,f,m.length,g.get()):/\d/.test(k.selectedList)&&k.selectedList>0&&f<=k.selectedList?g.map(function(){return d(this).next().text()}).get().join(k.selectedListSeparator):k.selectedText.replace("#",f).replace("#",m.length),this._setButtonValue(h),j&&(this.button[0].defaultValue=h)},_setButtonValue:function(f){this.buttonlabel.text(f)},_bindButtonEvents:function(){function g(){return f[f._isOpen?"close":"open"](),!1}var f=this,h=this.button;h.find("span").bind("click.multiselect",g),h.bind({click:g,keypress:function(j){switch(j.which){case 27:case 38:case 37:f.close();break;case 39:case 40:f.open()}},mouseenter:function(){h.hasClass("ui-state-disabled")||d(this).addClass("ui-state-hover")},mouseleave:function(){d(this).removeClass("ui-state-hover")},focus:function(){h.hasClass("ui-state-disabled")||d(this).addClass("ui-state-focus")},blur:function(){d(this).removeClass("ui-state-focus")}})},_bindMenuEvents:function(){var f=this;this.menu.delegate(".ui-multiselect-optgroup a","click.multiselect",function(j){j.preventDefault();var k=d(this),m=k.parent().find("input:visible:not(:disabled)"),h=m.get(),g=k.text();!1!==f._trigger("beforeoptgrouptoggle",j,{inputs:h,label:g})&&(f._toggleChecked(m.filter(":checked").length!==m.length,m),f._trigger("optgrouptoggle",j,{inputs:h,label:g,checked:h.length?h[0].checked:null}))}).delegate("label","mouseenter.multiselect",function(){d(this).hasClass("ui-state-disabled")||(f.labels.removeClass("ui-state-hover"),d(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(g){if(82!==g.which&&!(g.which>111&&g.which<124)){switch(g.preventDefault(),g.which){case 9:g.shiftKey?(f.menu.find(".ui-state-hover").removeClass("ui-state-hover"),f.header.find("li").last().find("a").focus()):f.close();break;case 27:f.close();break;case 38:case 40:case 37:case 39:f._traverse(g.which,this);break;case 13:case 32:d(this).find("input")[0].click();break;case 65:g.altKey&&f.checkAll();break;case 85:g.altKey&&f.uncheckAll()}}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(j){var k=d(this),p=this.value,h=k.parent().find("span").text(),g=this.checked,m=f.element.find("option");this.disabled||!1===f._trigger("click",j,{value:p,text:h,checked:g})?j.preventDefault():(k.focus(),k.prop("aria-selected",g),m.each(function(){this.value===p?this.selected=g:f.options.multiple||(this.selected=!1)}),f.options.multiple||(f.labels.removeClass("ui-state-active"),k.closest("label").toggleClass("ui-state-active",g),f.close()),f.element.trigger("change"),setTimeout(d.proxy(f.update,f),10))})},_bindHeaderEvents:function(){var f=this;this.header.delegate("a","click.multiselect",function(g){var h=d(this);h.hasClass("ui-multiselect-close")?f.close():h.hasClass("ui-multiselect-all")?f.checkAll():h.hasClass("ui-multiselect-none")&&f.uncheckAll(),g.preventDefault()}).delegate("a","keydown.multiselect",function(g){switch(g.which){case 27:f.close();break;case 9:var h=d(g.target);(!g.shiftKey||h.parent().prev().length||f.header.find(".ui-multiselect-filter").length)&&(h.parent().next().length||f.labels.length||g.shiftKey)||(f.close(),g.preventDefault())}})},_bindEvents:function(){var f=this;this._bindButtonEvents(),this._bindMenuEvents(),this._bindHeaderEvents(),c.bind("mousedown."+f._namespaceID,function(g){var h=g.target;!f._isOpen||h===f.button[0]||h===f.menu[0]||d.contains(f.menu[0],h)||d.contains(f.button[0],h)||f.close()}),d(this.element[0].form).bind("reset."+this._namespaceID,function(){setTimeout(d.proxy(f.refresh,f),10)})},_getMinWidth:function(){var h=this.options.minWidth,g=0;switch(typeof h){case"number":g=h;break;case"string":var f=h[h.length-1];g=h.match(/\d+/),g="%"===f?this.element.parent().outerWidth()*(g/100):parseInt(h,10)}return g},_setButtonWidth:function(){var g=this.element.outerWidth(),f=this._getMinWidth();g<f&&(g=f),this.button.outerWidth(g)},_setMenuWidth:function(){var g=this.menu,f=this.button.outerWidth()<=0?this._getMinWidth():this.button.outerWidth();g.outerWidth(this.options.menuWidth||f)},_setMenuHeight:function(){var g=this.menu.children(".ui-multiselect-header:visible").outerHeight(!0),f=0;this.menu.find(".ui-multiselect-checkboxes li, .ui-multiselect-checkboxes a").each(function(h,j){f+=d(j).outerHeight(!0)}),f>this.options.height?(this.menu.children(".ui-multiselect-checkboxes").css("overflow","auto"),f=this.options.height):this.menu.children(".ui-multiselect-checkboxes").css("overflow","hidden"),this.menu.children(".ui-multiselect-checkboxes").height(f),this.menu.height(f+g)},_resizeMenu:function(){this._setMenuWidth(),this._setMenuHeight()},_traverse:function(j,h){var k=d(h),m=38===j||37===j,g=k.parent()[m?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup):visible").first();if(g.length||(g=k.parents(".ui-multiselect-optgroup")[m?"prev":"next"]()),g.length){g.find("label:visible")[m?"last":"first"]().trigger("mouseover")}else{var f=this.menu.find("ul").last();this.menu.find("label:visible")[m?"last":"first"]().trigger("mouseover"),f.scrollTop(m?f.height():0)}},_toggleState:function(g,f){return function(){this.disabled||(this[g]=f),f?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(j,g){var f=g&&g.length?g:this.inputs,h=this;f.each(this._toggleState("checked",j)),f.eq(0).focus(),this.update();var k={};f.each(function(){k[this.value]=!0}),this.element.find("option").each(function(){!this.disabled&&k[this.value]&&h._toggleState("selected",j).call(this)}),f.length&&this.element.trigger("change")},_toggleDisabled:function(j){if(this.button.prop({disabled:j,"aria-disabled":j})[j?"addClass":"removeClass"]("ui-state-disabled"),this.options.disableInputsOnToggle){var g=this.menu.find(".ui-multiselect-checkboxes").get(0),f=[],h="ech-multiselect-disabled",k=0;if(j){for(f=g.querySelectorAll("input:enabled"),k=0;k<f.length;k++){f[k].setAttribute(h,!0),f[k].setAttribute("disabled","disabled"),f[k].setAttribute("aria-disabled","disabled"),f[k].parentNode.className=f[k].parentNode.className+" ui-state-disabled"}}else{for(f=g.querySelectorAll("input:disabled"),k=0;k<f.length;k++){f[k].hasAttribute(h)&&(f[k].removeAttribute(h),f[k].removeAttribute("disabled"),f[k].removeAttribute("aria-disabled"),f[k].parentNode.className=f[k].parentNode.className.replace(" ui-state-disabled",""))}}}this.element.prop({disabled:j,"aria-disabled":j})},open:function(v){var k=this,w=this.button,g=this.menu,j=this.speed,q=this.options,f=[];if(!1!==this._trigger("beforeopen")&&!w.hasClass("ui-state-disabled")&&!this._isOpen){var r=g.find(".ui-multiselect-checkboxes"),m=q.show;d.isArray(q.show)&&(m=q.show[0],j=q.show[1]||k.speed),m&&(f=[m,j]),r.scrollTop(0),d.fn.show.apply(g,f),this._resizeMenu(),this.position();var p=this.header.find(".ui-multiselect-filter");p.length?p.first().find("input").trigger("focus"):this.labels.length?this.labels.filter(":not(.ui-state-disabled)").eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"):this.header.find("a").first().trigger("focus"),w.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open")}},close:function(){if(!1!==this._trigger("beforeclose")){var g=this.options,f=g.hide,h=this.speed,j=[];d.isArray(g.hide)&&(f=g.hide[0],h=g.hide[1]||this.speed),f&&(j=[f,h]),d.fn.hide.apply(this.menu,j),this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave"),this._isOpen=!1,this._trigger("close"),this.button.trigger("focus")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(f){this._toggleChecked(!0),this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1),this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},getUnchecked:function(){return this.menu.find("input").not(":checked")},destroy:function(){return d.Widget.prototype.destroy.call(this),c.unbind(this._namespaceID),d(this.element[0].form).unbind(this._namespaceID),this.button.remove(),this.menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},getMenu:function(){return this.menu},getLabels:function(){return this.labels},addOption:function(h,g,j){var k=d("<option/>").attr(h).text(g),f=k.get(0);j?(this.element.children("OPTGROUP").filter(function(){return d(this).prop("label")===j}).append(k),this.menu.find(".ui-multiselect-optgroup").filter(function(){return d(this).find("a").text()===j}).append(this._makeOption(f))):(this.element.append(k),this.menu.find(".ui-multiselect-checkboxes").append(this._makeOption(f))),this.labels=this.menu.find("label"),this.inputs=this.labels.children("input")},removeOption:function(f){f&&(this.element.find("option[value="+f+"]").remove(),this.labels.find("input[value="+f+"]").parents("li").remove(),this.labels=this.menu.find("label"),this.inputs=this.labels.children("input"))},position:function(){var f={my:"top",at:"bottom",of:this.button};d.isEmptyObject(this.options.position)||(f.my=this.options.position.my||f.my,f.at=this.options.position.at||f.at,f.of=this.options.position.of||f.of),d.ui&&d.ui.position?this.menu.position(f):((f=this.button.position()).top+=this.button.outerHeight(!1),this.menu.offset(f))},_setOption:function(g,f){var h=this.menu;switch(g){case"header":"boolean"==typeof f?this.header[f?"show":"hide"]():"string"==typeof f&&(this.headerLinkContainer.children("li:not(:last-child)").remove(),this.headerLinkContainer.prepend("<li>"+f+"</li>"));break;case"checkAllText":h.find("a.ui-multiselect-all span").eq(-1).text(f);break;case"uncheckAllText":h.find("a.ui-multiselect-none span").eq(-1).text(f);break;case"height":this.options[g]=f,this._setMenuHeight();break;case"minWidth":case"menuWidth":this.options[g]=f,this._setButtonWidth(),this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[g]=f,this.update();break;case"classes":h.add(this.button).removeClass(this.options.classes).addClass(f);break;case"multiple":h.toggleClass("ui-multiselect-single",!f),this.options.multiple=f,this.element[0].multiple=f,this.uncheckAll(),this.refresh();break;case"position":this.position();break;case"selectedListSeparator":this.options[g]=f,this.update(!0)}d.Widget.prototype._setOption.apply(this,arguments)}})}(jQuery);(function(b){var c=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;function a(f,h,d){var g;return function(){var m=this,l=arguments;var k=function(){g=null;if(!d){f.apply(m,l)}};var j=d&&!g;clearTimeout(g);g=setTimeout(k,h);if(j){f.apply(m,l)}}}b.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:false,debounceMS:250},_create:function(){var f=this.options;var d=b(this.element);this.instance=d.multiselect("instance");this.header=this.instance.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");this.input=b("<input/>").attr({placeholder:f.placeholder,type:"search"}).css({width:/\d/.test(f.width)?f.width+"px":null}).bind({keydown:function(g){if(g.which===13){g.preventDefault()}else{if(g.which===27){d.multiselect("close");g.preventDefault()}else{if(g.which===9&&g.shiftKey){d.multiselect("close");g.preventDefault()}else{if(g.altKey){switch(g.which){case 82:g.preventDefault();b(this).val("").trigger("input","");break;case 65:d.multiselect("checkAll");break;case 85:d.multiselect("uncheckAll");break;case 76:d.multiselect("instance").labels.first().trigger("mouseenter");break}}}}}},input:b.proxy(a(this._handler,f.debounceMS),this),search:b.proxy(this._handler,this)});if(this.options.autoReset){d.bind("multiselectclose",b.proxy(this._reset,this))}d.bind("multiselectrefresh",b.proxy(function(){this.updateCache();this._handler()},this));this.wrapper=b("<div/>").addClass("ui-multiselect-filter").text(f.label).append(this.input).prependTo(this.header);this.inputs=this.instance.menu.find('input[type="checkbox"], input[type="radio"]');this.updateCache();this.instance._toggleChecked=function(j,m){var l=m&&m.length?m:this.labels.find("input");var h=this;var g=h._isOpen?":disabled, :hidden":":disabled";l=l.not(g).each(this._toggleState("checked",j));this.update();var k={};l.each(function(){k[this.value]=true});this.element.find("option").filter(function(){if(!this.disabled&&k[this.value]){h._toggleState("selected",j).call(this)}});if(l.length){this.element.trigger("change")}}},_handler:function(l){var h=b.trim(this.input[0].value.toLowerCase()),k=this.rows,d=this.inputs,f=this.cache;var g=this.instance.menu.find(".ui-multiselect-optgroup");g.show();if(!h){k.show()}else{k.hide();var j=new RegExp(h.replace(c,"\\$&"),"gi");this._trigger("filter",l,b.map(f,function(m,n){if(m.search(j)!==-1){k.eq(n).show();return d.get(n)}return null}))}g.each(function(){var m=b(this);if(!m.children("li:visible").length){m.hide()}});this.instance._setMenuHeight()},_reset:function(){this.input.val("").trigger("input","")},updateCache:function(){this.rows=this.instance.labels.parent();this.cache=this.element.children().map(function(){var d=b(this);if(this.tagName.toLowerCase()==="optgroup"){d=d.children()}return d.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){b.Widget.prototype.destroy.call(this);this.input.val("").trigger("keyup");this.wrapper.remove()}})})(jQuery);function start_minutes(b){window["timer_"+b]=setInterval(function(){$th=$("#time_"+b);var f=$th.find(".cur_min");var d=$th.find(".cur_hours");var c=parseInt(f.val(),10);var g=parseInt(d.val(),10);if(c==59){f.val(0);d.val(g+1)}else{f.val(c+1)}update_time_value($th,d.val(),f.val());update_total_time()},60000);var a=$("#action_button_"+b);a.prop("data-tip","Stop working");a.prop("onclick","").off("click").one("click",function(){stop_timer(b)});$("#time_"+b).addClass("started");a.removeClass("start").addClass("stop")}function stop_minutes(c){var a="timer_"+c;if(typeof window[a]!=="undefined"){clearInterval(window[a])}var b=$("#action_button_"+c);b.prop("data-tip","Start working");b.prop("onclick","").off("click").one("click",function(){start_timer(c)});$("#time_"+c).removeClass("started");b.removeClass("stop").addClass("start")}function update_time_value(f,c,b){var a=pad(b,2);var d=pad(c,2);f.find(".hours").html(d);f.find(".mins").html(a)}function update_total_time(){var d=$(".total_time .hours");var c=$(".total_time .mins");var b=parseInt(d.text(),10);var a=parseInt(c.text(),10);if(a==59){a=0;b=b+1}else{a=a+1}d.html(pad(b,2));c.html(pad(a,2))}function start_timer(a){if(disable_time_buttons()){$("#time_widget_control_"+a).find(".control").trigger("click")}}function stop_timer(a){if(disable_time_buttons()){$("#time_widget_control_"+a).find(".control").trigger("click")}}function recalc_visible_totals(){var c=0;var d=0;$(".time_task:visible").each(function(){c+=parseInt($(this).find(".cur_hours").val(),10);d+=parseInt($(this).find(".cur_min").val(),10)});var b=Math.floor(d/60);var f=Math.floor(d%60);c+=b;var a=pad(f,2);var g=pad(c,2);$(".total_time .hours").html(g);$(".total_time .mins").html(a);$("#total_time").val(c*60+f)}function disable_time_buttons(){if(f_time_buttons_disabled){return false}f_time_buttons_disabled=true;return true}$(function(){$(document).on("fcif_instant_filter_applied",function(){recalc_visible_totals()});$(document).on("click",".time_task_action",function(a){if(!disable_time_buttons()){return false}})});$.goToWikiVersion=function(b,a){location.href=url_to_project_unique_name+"/wiki/view/"+b+"/"+a};$.clickVersionsCompare=function(){var a=$(".wiki_versions_checkbox").filter(":checked").length;if(a!=2){alert("Check 2 versions to compare!");return false}var b=[];$(".wiki_versions_checkbox").each(function(){if($(this).is(":checked")){b.push($(this).attr("id").split("_")[2])}});location.href=url_to_project_unique_name+"/wiki/compare/"+b[0]+"/"+b[1]};$(function(){$(".wiki_versions_checkbox").click(function(b){var a=$(".wiki_versions_checkbox").filter(":checked").length;if(a>2){alert("You can compare only 2 versions!");b.preventDefault()}})});$(".copy_public_link").click(function(b){b.preventDefault();var a=$.attr(this,"href");if(b.ctrlKey||b.metaKey){window.open(a,"_blank");return}$("#wiki_copy_public_link").val(a);fc.execCopyCommand($("#wiki_copy_public_link"),wiki_public_link_copied_str,wiki_public_link_copied_error_str,2000,5000)});(function(){var d,a,k,c,j,m,p,s,r,h,n,t,f,v,l,q,u,x,g,w,o=[].slice,b=[].indexOf||function(A){for(var z=0,y=this.length;z<y;z++){if(z in this&&this[z]===A){return z}}return -1};d=jQuery;d.payment={};d.payment.fn={};d.fn.payment=function(){var y,z;z=arguments[0],y=2<=arguments.length?o.call(arguments,1):[];return d.payment.fn[z].apply(this,y)};j=/(\d{1,4})/g;c=[{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:j,length:[16],cvcLength:[3],luhn:true},{type:"maestro",pattern:/^(5(018|0[23]|[68])|6(39|7))/,format:j,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:"forbrugsforeningen",pattern:/^600/,format:j,length:[16],cvcLength:[3],luhn:true},{type:"dankort",pattern:/^5019/,format:j,length:[16],cvcLength:[3],luhn:true},{type:"visa",pattern:/^4/,format:j,length:[13,16],cvcLength:[3],luhn:true},{type:"mastercard",pattern:/^5[0-5]/,format:j,length:[16],cvcLength:[3],luhn:true},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:"dinersclub",pattern:/^3[0689]/,format:j,length:[14],cvcLength:[3],luhn:true},{type:"discover",pattern:/^6([045]|22)/,format:j,length:[16],cvcLength:[3],luhn:true},{type:"unionpay",pattern:/^(62|88)/,format:j,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:"jcb",pattern:/^35/,format:j,length:[16],cvcLength:[3],luhn:true}];a=function(A){var z,B,y;A=(A+"").replace(/\D/g,"");for(B=0,y=c.length;B<y;B++){z=c[B];if(z.pattern.test(A)){return z}}};k=function(A){var z,B,y;for(B=0,y=c.length;B<y;B++){z=c[B];if(z.type===A){return z}}};f=function(z){var E,D,C,A,B,y;C=true;A=0;D=(z+"").split("").reverse();for(B=0,y=D.length;B<y;B++){E=D[B];E=parseInt(E,10);if((C=!C)){E*=2}if(E>9){E-=9}A+=E}return A%10===0};t=function(y){var z;if((y.prop("selectionStart")!=null)&&y.prop("selectionStart")!==y.prop("selectionEnd")){return true}if(typeof document!=="undefined"&&document!==null?(z=document.selection)!=null?typeof z.createRange==="function"?z.createRange().text:void 0:void 0:void 0){return true}return false};v=function(y){return setTimeout(function(){var z,A;z=d(y.currentTarget);A=z.val();A=d.payment.formatCardNumber(A);return z.val(A)})};s=function(D){var y,z,F,B,A,E,C;F=String.fromCharCode(D.which);if(!/^\d+$/.test(F)){return}y=d(D.currentTarget);C=y.val();z=a(C+F);B=(C.replace(/\D/g,"")+F).length;E=16;if(z){E=z.length[z.length.length-1]}if(B>=E){return}if((y.prop("selectionStart")!=null)&&y.prop("selectionStart")!==C.length){return}if(z&&z.type==="amex"){A=/^(\d{4}|\d{4}\s\d{6})$/}else{A=/(?:^|\s)(\d{4})$/}if(A.test(C)){D.preventDefault();return setTimeout(function(){return y.val(C+" "+F)})}else{if(A.test(C+F)){D.preventDefault();return setTimeout(function(){return y.val(C+F+" ")})}}};m=function(A){var y,z;y=d(A.currentTarget);z=y.val();if(A.which!==8){return}if((y.prop("selectionStart")!=null)&&y.prop("selectionStart")!==z.length){return}if(/\d\s$/.test(z)){A.preventDefault();return setTimeout(function(){return y.val(z.replace(/\d\s$/,""))})}else{if(/\s\d?$/.test(z)){A.preventDefault();return setTimeout(function(){return y.val(z.replace(/\s\d?$/,""))})}}};l=function(y){return setTimeout(function(){var z,A;z=d(y.currentTarget);A=z.val();A=d.payment.formatExpiry(A);return z.val(A)})};r=function(z){var y,B,A;B=String.fromCharCode(z.which);if(!/^\d+$/.test(B)){return}y=d(z.currentTarget);A=y.val()+B;if(/^\d$/.test(A)&&(A!=="0"&&A!=="1")){z.preventDefault();return setTimeout(function(){return y.val("0"+A+" / ")})}else{if(/^\d\d$/.test(A)){z.preventDefault();return setTimeout(function(){return y.val(""+A+" / ")})}}};h=function(z){var y,B,A;B=String.fromCharCode(z.which);if(!/^\d+$/.test(B)){return}y=d(z.currentTarget);A=y.val();if(/^\d\d$/.test(A)){return y.val(""+A+" / ")}};n=function(z){var y,B,A;A=String.fromCharCode(z.which);if(!(A==="/"||A===" ")){return}y=d(z.currentTarget);B=y.val();if(/^\d$/.test(B)&&B!=="0"){return y.val("0"+B+" / ")}};p=function(A){var y,z;y=d(A.currentTarget);z=y.val();if(A.which!==8){return}if((y.prop("selectionStart")!=null)&&y.prop("selectionStart")!==z.length){return}if(/\s\/\s\d?$/.test(z)){A.preventDefault();return setTimeout(function(){return y.val(z.replace(/\s\/\s\d?$/,""))})}};g=function(z){var y;if(z.metaKey||z.ctrlKey){return true}if(z.which===32){return false}if(z.which===0){return true}if(z.which<33){return true}y=String.fromCharCode(z.which);return !!/[\d\s]/.test(y)};u=function(B){var y,z,C,A;y=d(B.currentTarget);C=String.fromCharCode(B.which);if(!/^\d+$/.test(C)){return}if(t(y)){return}A=(y.val()+C).replace(/\D/g,"");z=a(A);if(z){return A.length<=z.length[z.length.length-1]}else{return A.length<=16}};x=function(A){var y,B,z;y=d(A.currentTarget);B=String.fromCharCode(A.which);if(!/^\d+$/.test(B)){return}if(t(y)){return}z=y.val()+B;z=z.replace(/\D/g,"");if(z.length>6){return false}};q=function(z){var y,B,A;y=d(z.currentTarget);B=String.fromCharCode(z.which);if(!/^\d+$/.test(B)){return}if(t(y)){return}A=y.val()+B;return A.length<=4};w=function(C){var z,B,A,y,D;z=d(C.currentTarget);D=z.val();y=d.payment.cardType(D)||"unknown";if(!z.hasClass(y)){B=(function(){var G,F,E;E=[];for(G=0,F=c.length;G<F;G++){A=c[G];E.push(A.type)}return E})();z.removeClass("unknown");z.removeClass(B.join(" "));z.addClass(y);z.toggleClass("identified",y!=="unknown");return z.trigger("payment.cardType",y)}};d.payment.fn.formatCardCVC=function(){this.payment("restrictNumeric");this.on("keypress",q);return this};d.payment.fn.formatCardExpiry=function(){this.payment("restrictNumeric");this.on("keypress",x);this.on("keypress",r);this.on("keypress",n);this.on("keypress",h);this.on("keydown",p);this.on("change",l);this.on("input",l);return this};d.payment.fn.formatCardNumber=function(){this.payment("restrictNumeric");this.on("keypress",u);this.on("keypress",s);this.on("keydown",m);this.on("keyup",w);this.on("paste",v);this.on("change",v);this.on("input",v);this.on("input",w);return this};d.payment.fn.restrictNumeric=function(){this.on("keypress",g);return this};d.payment.fn.cardExpiryVal=function(){return d.payment.cardExpiryVal(d(this).val())};d.payment.cardExpiryVal=function(B){var C,A,y,z;B=B.replace(/\s/g,"");z=B.split("/",2),C=z[0],y=z[1];if((y!=null?y.length:void 0)===2&&/^\d+$/.test(y)){A=(new Date).getFullYear();A=A.toString().slice(0,2);y=A+y}C=parseInt(C,10);y=parseInt(y,10);return{month:C,year:y}};d.payment.validateCardNumber=function(z){var y,A;z=(z+"").replace(/\s+|-/g,"");if(!/^\d+$/.test(z)){return false}y=a(z);if(!y){return false}return(A=z.length,b.call(y.length,A)>=0)&&(y.luhn===false||f(z))};d.payment.validateCardExpiry=function(C,z){var A,y,B;if(typeof C==="object"&&"month" in C){B=C,C=B.month,z=B.year}if(!(C&&z)){return false}C=d.trim(C);z=d.trim(z);if(!/^\d+$/.test(C)){return false}if(!/^\d+$/.test(z)){return false}if(!((1<=C&&C<=12))){return false}if(z.length===2){if(z<70){z="20"+z}else{z="19"+z}}if(z.length!==4){return false}y=new Date(z,C);A=new Date;y.setMonth(y.getMonth()-1);y.setMonth(y.getMonth()+1,1);return y>A};d.payment.validateCardCVC=function(z,A){var y,B;z=d.trim(z);if(!/^\d+$/.test(z)){return false}y=k(A);if(y!=null){return B=z.length,b.call(y.cvcLength,B)>=0}else{return z.length>=3&&z.length<=4}};d.payment.cardType=function(y){var z;if(!y){return null}return((z=a(y))!=null?z.type:void 0)||null};d.payment.formatCardNumber=function(A){var z,y,C,B;z=a(A);if(!z){return A}C=z.length[z.length.length-1];A=A.replace(/\D/g,"");A=A.slice(0,C);if(z.format.global){return(B=A.match(z.format))!=null?B.join(" "):void 0}else{y=z.format.exec(A);if(y==null){return}y.shift();y=d.grep(y,function(D){return D});return y.join(" ")}};d.payment.formatExpiry=function(z){var B,C,y,A;C=z.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);if(!C){return""}B=C[1]||"";y=C[2]||"";A=C[3]||"";if(A.length>0||(y.length>0&&!(/\ \/?\ ?/.test(y)))){y=" / "}if(B.length===1&&(B!=="0"&&B!=="1")){B="0"+B;y=" / "}return B+y+A}}).call(this);
/*!
 * jQuery TextChange Plugin
 * http://www.zurb.com/playground/jquery-text-change-custom-event
 *
 * Copyright 2010, ZURB
 * Released under the MIT License
 */
(function(b){b.event.special.textchange={setup:function(){b(this).data("lastValue",this.contentEditable==="true"?b(this).html():b(this).val());b(this).bind("keyup.textchange",b.event.special.textchange.handler);b(this).bind("cut.textchange paste.textchange input.textchange",b.event.special.textchange.delayedHandler)},teardown:function(){b(this).unbind(".textchange")},handler:function(){b.event.special.textchange.triggerIfChanged(b(this))},delayedHandler:function(){var a=b(this);setTimeout(function(){b.event.special.textchange.triggerIfChanged(a)},25)},triggerIfChanged:function(d){var c=d[0].contentEditable==="true"?d.html():d.val();c!==d.data("lastValue")&&(d.trigger("textchange",[d.data("lastValue")]),d.data("lastValue",c))}};b.event.special.hastext={setup:function(){b(this).bind("textchange",b.event.special.hastext.handler)},teardown:function(){b(this).unbind("textchange",b.event.special.hastext.handler)},handler:function(d,a){a===""&&a!==b(this).val()&&b(this).trigger("hastext")}};b.event.special.notext={setup:function(){b(this).bind("textchange",b.event.special.notext.handler)},teardown:function(){b(this).unbind("textchange",b.event.special.notext.handler)},handler:function(d,a){b(this).val()===""&&b(this).val()!==a&&b(this).trigger("notext")}}})(jQuery);var notifier={};notifier.HasSupport=function(){if(!window.webkitNotifications){return false}if(window.webkitNotifications.checkPermission()!=0){return false}return true};var notifications_count=0;var curr_title=document.title;function open_notification(c,f){var d=jQuery.parseJSON(c);if(d.user_id!=userid){var g=$("#notification_container");var a="";a+='<p style="padding:10px; color:#fff; font-family:Arial; text-shadow:0px 1px 0px #000;">';a+=d.message;a+="</p>";var b=$('<div style="display:none"></div>');b.html(a).bind("click",function(){window.location.href=d.href});g.append(b).show();if(notifier.HasSupport()){chromeNotify(d.message)}flashTitle(d.message);$(b).fadeIn(700).delay(f).fadeOut(1000)}}function chromeNotify(d){if(!notifier.HasSupport()){return}var c="http://images.fzilla.com/images/chromenoti.png";var f="Freedcamp Notification";var a=d;var b=window.webkitNotifications.createNotification(c,f,a);b.onclick=function(g){window.focus();this.cancel()};b.show();setTimeout(function(){b.cancel()},"9000")}$(function(){$("#show_button").click(function(){if(window.webkitNotifications.checkPermission()==0){open_notification('{"message":"test222"}',2000)}else{window.webkitNotifications.requestPermission()}})});(function(){var a=document.title;var b;window.flashTitle=function(d,c){function f(){document.title=(document.title==a)?d:a;if(--c>0){b=setTimeout(f,1000)}}c=parseInt(c,10);c=(c%2==0)?c:c+1;if(isNaN(c)){c=6}clearTimeout(b);f()};window.cancelFlashTitle=function(){clearTimeout(b);document.title=a}}());if(typeof fc==="undefined"){var fc={}}if(typeof CKEDITOR_BASEPATH==="undefined"){var CKEDITOR_BASEPATH=""}if(typeof cdn_url==="undefined"){var cdn_url=""}if(!fc.user_lang_code){fc.user_lang_code="en"}fc.started_ts=new Date();fc.cached_email_details={};fc.f_ajax_redirect=false;fc.file_picker;var ckeditor_std_toolbar_temp=["Mentions","Bold","Italic","Underline","Strike","-","NumberedList","BulletedList","Outdent","Indent","Blockquote","-","Link","Unlink","-"];var ckeditor_extraPlugins="autosave,mentions";var ckeditor_extraPlugins_adv=ckeditor_extraPlugins;fc.cke_btns_cnt=0;if(fc.custom_cke){if(fc.custom_cke.length){ckeditor_std_toolbar_temp.push("-")}var f_delim_needed=false;if(fc.custom_cke.indexOf("cke_code_btn")+1){ckeditor_std_toolbar_temp.push("Syntaxhighlight","-");fc.cke_btns_cnt++}if(fc.custom_cke.indexOf("cke_btn_format")+1){f_delim_needed=true;ckeditor_std_toolbar_temp.push("Format");fc.cke_btns_cnt+=3}if(fc.custom_cke.indexOf("cke_btn_aligns")+1){f_delim_needed=true;ckeditor_std_toolbar_temp.push("JustifyLeft","JustifyCenter","JustifyRight");fc.cke_btns_cnt+=3}if(fc.custom_cke.indexOf("cke_rtl_btn")+1){f_delim_needed=true;ckeditor_std_toolbar_temp.push("BidiLtr","BidiRtl");fc.cke_btns_cnt+=2}if(fc.custom_cke.indexOf("cke_btn_colors")+1){f_delim_needed=true;ckeditor_std_toolbar_temp.push("TextColor","BGColor");fc.cke_btns_cnt+=2}if(f_delim_needed){f_delim_needed=false;ckeditor_std_toolbar_temp.push("-")}if(fc.custom_cke.indexOf("cke_btn_full")+1){ckeditor_std_toolbar_temp.push("Maximize","-");fc.cke_btns_cnt++}if(fc.custom_cke.indexOf("cke_btn_src")+1){ckeditor_std_toolbar_temp.push("Source");fc.cke_btns_cnt+=2}if(fc.custom_cke.indexOf("cke_btn_clear_format")+1){ckeditor_std_toolbar_temp.push("RemoveFormat");fc.cke_btns_cnt++}if(fc.custom_cke.indexOf("cke_tbl_tools")+1){ckeditor_extraPlugins_adv=ckeditor_extraPlugins_adv+",tabletools,tableresize"}}else{ckeditor_std_toolbar_temp.push("TextColor","BGColor")}var ckeditor_std_toolbar=[ckeditor_std_toolbar_temp];var ckeditor_ext_toolbar=[{name:"clipboard",groups:["clipboard","undo"],items:["PasteText","PasteFromWord"]},{name:"editing",groups:["find","selection","spellchecker"],items:["Find","Replace","-","SelectAll","-"]},{name:"insert",items:["Image","Syntaxhighlight","Table","HorizontalRule","SpecialChar","Iframe"]},{name:"document",groups:["mode","document","doctools"],items:["Source","-","Preview"]},"/",{name:"basicstyles",groups:["basicstyles","cleanup"],items:[]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"],items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl","Language"]},"/",{name:"styles",items:["Format","Bold","Italic","Underline","Strike","RemoveFormat","Styles"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks"]},{name:"action",items:["Undo","Redo"]}];var ckeditor_remove_plugins="pastefromword, pastetext";var ckeditor_remove_plugins_advanced="";var ckeditor_default_height="100px";if(fc.user_lang_code=="ko"){ckeditor_remove_plugins+=", autogrow";ckeditor_remove_plugins_advanced="autogrow";ckeditor_default_height="150px"}var ckeditor_extra_allowed_content="table {border-collapse}; tr; a [id, name];th td [colspan]{text-align, padding};table iframe img[src, alt, height, width]{height, width}; pre (brush*);span(fc_mention)[data-mtype, data-id, data-locid];a[data-mtype, data-id, data-locid];iframe[allowfullscreen, allowtransparency];*{color, background-color, border, font-size, font-family, font-weight}";var autosave_config={saveDetectionSelectors:"input[type='submit'], a.cancel, a.cancel_edit",messageType:"statusbar",delay:10};var ckeditor_standard_options={toolbar:ckeditor_std_toolbar,uiColor:"#F0F0F0",autoGrow_bottomSpace:"10",autoGrow_maxHeight:300,height:ckeditor_default_height,width:"95%",fillEmptyBlocks:false,IgnoreEmptyParagraphValue:true,AutoParagraph:false,indentClasses:["ck_indent1","ck_indent2","ck_indent3"],contentsCss:[CKEDITOR_BASEPATH+"contents.css?ver=2",cdn_url+"platform/css/editor.css",CKEDITOR_BASEPATH+"plugins/mentions/contents.css"],disableNativeSpellChecker:false,removePlugins:ckeditor_remove_plugins,extraAllowedContent:ckeditor_extra_allowed_content,extraPlugins:ckeditor_extraPlugins,autosave:autosave_config,language:fc.user_lang_code};var ckeditor_advanced_options={toolbar:ckeditor_ext_toolbar,uiColor:"#F0F0F0",autoGrow_bottomSpace:"10",autoGrow_maxHeight:300,height:"400px",width:"95%",fillEmptyBlocks:false,IgnoreEmptyParagraphValue:true,AutoParagraph:false,contentsCss:[CKEDITOR_BASEPATH+"contents.css?ver=2",cdn_url+"platform/css/editor.css",CKEDITOR_BASEPATH+"plugins/mentions/contents.css",cdn_url+"platform/css/editor_wiki.css"],disableNativeSpellChecker:false,removePlugins:ckeditor_remove_plugins_advanced,extraAllowedContent:ckeditor_extra_allowed_content,extraPlugins:ckeditor_extraPlugins_adv,autosave:autosave_config,language:fc.user_lang_code};String.sprintf=function(b){var a=Array.prototype.slice.call(arguments,1);return b.replace(/{(\d+)}/g,function(c,d){return typeof a[d]!="undefined"?a[d]:c})};function ajaxRequest(a,b,g,d){var d=d||{};var k=d.f_form_data;var j="POST";if(!empty(d.type)){j=d.type}if(typeof b=="function"){g=b;b={}}var f=new Date();var h={};h.is_ajax=true;h.time_on_page=Math.round((f-fc.started_ts)/1000);h.assets_version=fc.assets_version;if(k){h=b}else{for(i in b){if(!b.hasOwnProperty(i)){continue}h[i]=b[i]}}var c={url:a,dataType:"json",data:h,type:j,cache:false,success:function(n){if(typeof d["$form"]!=="undefined"){d["$form"].trigger("formSubmitFinished")}var l=0;if(n.additional_params){var m=n.additional_params;if(m.reload_page){fc.f_ajax_redirect=true;window.location.reload();return}if(m.redirect){fc.f_ajax_redirect=true;if(!empty(d.onBeforeRedirect)){d.onBeforeRedirect(function(){location.href=m.redirect})}else{location.href=m.redirect}return}if(m.step_link){load_step(m.step_link)}l=m.f_skip_enable_form||0}if(n.status=="success"){if(!empty(g)){g(n)}}else{if(n.status=="error"){fc.ajax(false);$("#temp_cover_ajax").remove();if(n.data.errors){$.each(n.data.errors,function(o,p){fc.showValidationMessage(p.field,p.error_message)});if(!empty(n.data.success)){$.each(n.data.success,function(o,p){fc.clearValidationMessage(p.field)})}}if(d.onError&&typeof d.onError=="function"){d.onError(n)}else{if(!empty(n.message)){if(!empty(n.data)){if(!empty(n.data.error_source)&&n.data.error_source=="marketplace"){fc.displayError({title:"",content:n.message,error_id:""},8000)}else{fc.displayError({title:smth_wrong_detailed_str,content:smth_wrong_sorry_str,error:n.message,error_id:n.data.error_id},8000)}}else{fc.displayError({title:smth_wrong_str,content:n.message,error:"",error_id:""},8000)}}}}else{fc.registerError('Unsupported ajax response status"'+n.status+'"',a)}}if(!l){fc.enableForm()}},error:function(m,o,n){fc.enableForm();if(m.status!=399){var l={};l.type="ajax() error";l.text_status=o;l.error_thrown=n;l.err_status=m.status;l.response=m.responseText;l.url=a;l.data=h;l.request_type=j;l.request_time=Math.round((new Date()-f)/1000);if(h.password){h.password="cleared"}l.request_params=h;if(502==m.status||m.responseText.indexOf("Fatal error: Allowed")+1){l.url=a;fc.registerError(l,a,0,"fatal")}else{fc.registerError(l,a)}}}};if(k){c.contentType=false;c.processData=false}$.ajax(c)}fc.disableForm=function(a){if(fc.forbidFormSubmit(a)){a.find("input[type=submit]").prop("disabled",true);return true}return false};fc.enableForm=function(){if(!$("input[type=submit], .submitBtn").length){return}$("input[type=submit], .submitBtn").prop("disabled",false);$("input[type=submit], .submitBtn").removeClass("disabled");$("button.btn.btn-disabled").removeClass("btn-disabled");if(!fc.keep_ajax_cover){$("#temp_cover_ajax").remove()}$(".loader_img").hide();fc.allowFormSubmit("form");if(typeof fkit!=="undefined"){fkit.initiatePlugins()}};fc.forbidFormSubmit=function(a){if($(a).data("f_no_submit")){return false}$(a).data("f_no_submit",true);return true};fc.allowFormSubmit=function(a){$(a).data("f_no_submit",false)};fc.showRestoreSession=function(){if(fc.isMobileVersion){location.reload();return false}ajaxRequest(base_url+"auth/restore_session",{},function(a){$(".lighten").attr("style","");$(".flash_message").html(a.data.html).removeClass("alert-info").addClass("alert-warning restore_session_container").slideDown()})};fc.showValidationMessage=function(b,c){var a=$('form:not(".fkit_form") [name="'+b+'"]').parent().find("span.error_message");if(!empty(a.length)){a.html(c)}else{$('form:not(".fkit_form") [name="'+b+'"]').addClass("error").parent().append('<span class="error_message">'+c+"</span>")}};fc.clearValidationMessage=function(a){$('form:not(".fkit_form") [name="'+a+'"]').removeClass("error").parent().find("span.error_message").html("")};fc.showInfoEmailInPopup=function(b){if(fc.isIpad){return false}var a=$(b).data("href");ajaxRequest(a,{},function(d){var c=d.data.html;if(!$("#email_in_dialog_wrapper").length){$("body").append('<div id="email_in_dialog_wrapper"></div>')}$("#email_in_dialog_wrapper").html("");$("#email_in_dialog_wrapper").append(c);$(".lighten").css("opacity","1").fadeIn();$("#email_in_dialog").fadeIn()},{type:"GET"})};fc.makeEmailInAddress=function(f){var b=f.attr("data-project_name"),d=f.attr("data-hash"),a=f.attr("data-incoming_emails_domain"),c=f.attr("data-application");if(!c){c="[tasks|discussions|files|issues]"}var g='"'+b+'" <'+d+"+"+c+"@"+a+">";f.attr("value",g);f.data("pure_email",d+"+"+c+"@"+a)};fc.copyEmailInAddressToClipboard=function(a){a.select();try{document.execCommand("copy");if(typeof toastr!=="undefined"){toastr.info("Email is copied to the clipboard!")}else{$(".flash_message").html("Email is copied to the clipboard!").slideDown().delay(2000).slideUp()}if(!$("#lns_usage_info").is(":visible")){$("#lns_usage_info").fadeIn()}}catch(b){if(typeof toastr!=="undefined"){toastr.info("Please copy email now")}else{$(".flash_message").html("Please copy email now").slideDown().delay(2000).slideUp()}return false}a.removeAttr("value")};function empty(a){return a==0||!a||(typeof a=="object"&&$.isEmptyObject(a))}function intval(a){a=parseInt(a,10);return a?a:0}function floatVal(a){a=parseFloat(a);return a?a:0}$(window).on("beforeunload",function(b){if(fc.f_ajax_redirect){return}if(typeof unsaved_page_str==="undefined"){return}if(!fc.needUnsavedAlert()){if(typeof fkit!=="undefined"&&fkit.al_f_loaded){fkit.al_close_confirm(true)}return}var a=unsaved_page_str;(b||window.event).returnValue=a;return a});fc.needUnsavedAlert=function(a){var c=50;if(fc.invite_changes_count){fc.logEvent("invites","unsaved");return true}if(typeof CKEDITOR==="undefined"){return false}if(typeof CKEDITOR.instances==="undefined"){return false}for(var b in CKEDITOR.instances){if(typeof CKEDITOR.instances[b].document==="undefined"){continue}if(a&&b!=="add_comment_wysiwyg"){continue}if($.trim(CKEDITOR.instances[b].document.getBody().getText()).length>c){return true}}return false};(function(a){a.fn.serializeFormJSON=function(){var c={};var b=this.serializeArray();a.each(b,function(){if(c[this.name]!==undefined){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c}})(jQuery);function load_step(a){ajaxRequest(a,{},function(b){$(".modal .form").html("").append(b.data.html)},{type:"GET"})}fc.logged_errors_count=0;fc.registerError=function(c,f,d,h){var g=5;if(fc.logged_errors_count>g){return}else{if(fc.logged_errors_count===g){c="Blocking repeatedly sent errors by JS"}}fc.logged_errors_count++;f=f||location.href;d=d||0;h=h||"info";if(fc.alert_js_errors&&!c.log_event&&!JSON.stringify(c).indexOf("not compatible with Quirks Mode")){alert(JSON.stringify(c))}if(typeof c==="object"){if("error" in c&&c.error==="Script error."&&"file_url" in c&&c.file_url===""&&"line" in c&&c.line=="0"&&"column" in c&&c.column===""){if(!d){fc.displayError({title:smth_wrong_str,content:smth_wrong_sorry_str,error:"",error_id:0},8000)}return}}var a={};a.error_info=c;a.request_uri=f;a.level=h;var b=base_url+"register_error";if(b.indexOf("undefined")+1){a.extra="undefined in url";b="/register_error"}$.ajax({url:b,dataType:"json",data:a,type:"POST",success:function(j){if(!d){var k=intval(j.data.error_id);fc.displayError({title:smth_wrong_detailed_str,content:j.message,error:c,error_id:k},8000)}},error:function(){if(!d){fc.displayError({title:smth_wrong_str,content:smth_wrong_sorry_str,error:"",error_id:0},8000)}}})};fc.displayError=function(d,b){if(empty(b)){b=8000}var c=$("#alert_container");if(!c.length){throw"FC::Alert container missing from DOM";return}var a='<a id="close_alert_container" class="close-alert"></a>';a+="<div><strong>"+d.title;if(!empty(d.error_id)){a+=' <a style="color:#fff;" title="'+d.error+'">#'+d.error_id+"</a>"}else{if(!empty(d.error)){a+=' <a style="color:#fff;" title="'+d.error+'">'+d.error+"</a>"}}a+='</strong></div><div class="container_message">'+d.content.replace(/\n/g,"<br />").replace("\n","<br />").replace("\n","<br />")+"</div>";c.html(a);c.slideDown().delay(b).slideUp(700)};if(document.body){document.body.parentNode.className="js"}$(function(){if($("body").hasClass("dashboard_home")||$("body").hasClass("fc_dashboard_page")){$("body").addClass("fade_dashboard_in")}$(document).on("click","#close_alert_container",function(a){$("#alert_container").stop().slideUp()});$(document).on("click",".delete",function(a){a.preventDefault();a.stopPropagation();$th=$(this);if(!$(this).hasClass("disabled")){fc.confirmDialog($th,$th.data("callback")?$th.data("callback"):$th.attr("href"))}});$(document).on("click",function(a){if($("#confirm_dialog").is(":visible")){if(!$(a.target).parents("#confirm_dialog").length){$(".forced_visible").removeClass("forced_visible");$("#confirm_dialog").fadeOut()}}});$(document).on("click","a.view, a.back_to_app, a.action_edit, ul.col_r_menu li > a",function(a){if(!$(this).hasClass("clear-filters")){a.preventDefault();window.location=$(this).attr("href")+window.location.hash}});$(document).on("click",".email_in_copy_email",function(c){c.preventDefault();var b=$(this).data("project_id");var a=$("#project_id_"+b+"_email");fc.makeEmailInAddress(a);fc.copyEmailInAddressToClipboard(a);$("#lns_usage_info").find(".email_in_proj_addr.common").html(a.data("pure_email"));$("#lns_usage_info").find(".email_in_proj_addr.tasks").html(a.attr("data-hash")+"+tasks@"+a.attr("data-incoming_emails_domain"));$("#lns_usage_info").find(".email_in_proj_addr.issues").html(a.attr("data-hash")+"+issues@"+a.attr("data-incoming_emails_domain"));$("#email_in_dialog").find("#close_btn").click()});$(document).on("click",".activate_picker",function(){window.scrollTo(0,0);$(".color").focus()});$(document).on("click","#dismiss_ribon",function(){$("#ribbon_notification").fadeOut();fc.setCookie("f_dismiss_ribbon_notification_"+userid,1,1)});$(document).on("click",".follow_project_btn",function(){fc.followOrUnfollowProject($(this).data("action"),$(this).data("project-id"))});if(typeof fkit!=="undefined"){fkit.register_esc_handler(fc.closeGlobalSearch)}if(typeof log_vz!=="undefined"){setTimeout(function(){fc.log_vz(log_vz)},2000)}$(document).on("click",".xls_link",function(c){var a=$(this).attr("href");if(a.indexOf("?f_fiu=1&")!==-1){return true}if(fcif.get_conditions_from_url()){var b=fcif.getSelectedConditions();$(this).attr("href",$(this).attr("href")+"?f_fiu=1&"+$.param(b))}return true})});fc.showUnfollowProjectConfirmation=function(c,a){var b="The project will no longer appear in your project picker. You can follow the project again later. Unfollow project?";fkit.confirm(c.target,"Unfollow Project",b,function(){fc.followOrUnfollowProject("unfollow",a)})};fc.followOrUnfollowProject=function(c,b){var a=base_url+"manage/follow_unfollow_project";ajaxRequest(a,{action:c,project_id:b},function(){var d=c=="follow"?"Project followed!":"Project unfollowed!";$.flash_action(d);window.location.reload()})};fc.confirmDialog=function(a,g){$dialog=$("#confirm_dialog");$dialog.removeClass("right");var f=a.offset().left-18;var c=a.height();if(f+$dialog.width()>=$(window).width()){$dialog.addClass("right");f=a.offset().left-100}else{if(a.data("confcenter")){f=a.offset().left+(a.outerWidth()-$dialog.outerWidth())/2+20;c=a.outerHeight()}}var b=$();if(a.data("forcevisible")){var d=a.data("forcevisible");if(d==="self"){b=a}else{b=$(a.data("forcevisible"))}$(".forced_visible").removeClass("forced_visible");b.addClass("forced_visible")}$dialog.css({left:f,top:a.offset().top+c}).fadeIn();$("#confirm_dialog .yes, #confirm_dialog .no").unbind("click");$("#confirm_dialog .yes").bind("click",function(h){h.preventDefault();h.stopPropagation();if(typeof window[g]=="function"){window[g](a)}else{if(typeof g=="function"){g(a)}else{window.location=g}}$dialog.fadeOut();b.removeClass("forced_visible")});$("#confirm_dialog .no").bind("click",function(h){h.preventDefault();$("#confirm_dialog .yes, #confirm_dialog .no").unbind("click");$dialog.fadeOut();b.removeClass("forced_visible")});$("#confirm_dialog .yes").focus()};fc.confirm_dialog_loading=false;fc.isInternetExplorer=function(){var a=window.navigator.userAgent;return a.indexOf("MSIE ")>0||a.indexOf("Trident/")>0};fc.getBrowser=function(){var c=((navigator&&navigator.vendor)||"").toLowerCase();var b=((navigator&&navigator.userAgent)||"").toLowerCase();if(/google inc/.test(c)&&b.match(/(?:chrome|crios)\/(\d+)/)){return"chrome"}if(!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime)){return"chrome"}if(typeof InstallTrigger!=="undefined"){return"firefox"}var a=fc.isInternetExplorer()||!!document.documentMode;if(a){return"msie"}if(!a&&!!window.StyleMedia){return"msedge"}return"unknown"};window.onerror=function(h,c,b,f,j){f=f||"";var a="";if(j){try{a=JSON.stringify(j)}catch(g){a="Exception when stringifying error object ."}}var d={error:h,file_url:c,line:b,column:f,err_obj:a,javascript_error:true};var c=location.href;fc.registerError(d,c,true)};fc.show_and_reset_popover_position=function(a,b){b.fadeIn(150).position({my:"left-35 top+10",at:"center bottom",of:a,collision:"custom"});fc.outer_click_type="user_popover";return true};fc.fill_email_data=function(c,g){var b=g.find(".user-contact-details .email");if(!b.length){return false}var f=c.data("app_id");var d=c.data("item_id");if(typeof d==="undefined"){return false}var h=f+"_"+d;if(typeof fc.cached_email_details[h]!=="undefined"){b.attr("href",fc.cached_email_details[h]);return true}if(!d){b.attr("href",b.data("default"));return true}var a={};a.app_id=f;a.location=window.location.href;a.item_id=d;ajaxRequest("/profiles/get_popover_email_details",a,function(k){if(k.status==="success"){var j=g.find(".user-contact-details .email");j.attr("href",k.data.email_link_details);fc.cached_email_details[h]=k.data.email_link_details}})};fc.showMentionsPopover=function(b){if(fc.f_in_public_project){return}if("user"!==b.data("mtype")){return}var a=b.data("id");if(!a){return}$(".mention_popover").fadeOut(150).promise().always(function(){var c=b.data("project_id")||fc.project_id;var f="#popover_user"+a+"_"+c;if($(f).length){fc.show_and_reset_popover_position(b,$(f));fc.fill_email_data(b,$(f))}else{var d="";if(c>0){d="/"+c}ajaxRequest("/profiles/get_user_popover/"+a+d,"",function(g){$("body").append(g.data);fc.show_and_reset_popover_position(b,$(f));fc.fill_email_data(b,$(f))})}})};$(function(){fc.process_url_hash();$(document).on("click",".click-to-scroll",function(g){var j=false;$elem=$($.attr(this,"href"));if($elem.length>0){fc.highlight_elements($elem);var d=$("html, body");var h=$elem.offset().top;if(fkit.al_f_loaded&&$elem.parents(".al_container").length){j=true;d=$elem.parents(".al_container");h=$elem.position().top}d.animate({scrollTop:h-20},1000,function(){if(j){fkit.al_fix_top_buttons()}});var f=window.location.pathname.replace(/^\//,"");$("#comment_url_to_copy").val(base_url+f+$.attr(this,"href"));fc.execCopyCommand($("#comment_url_to_copy"),copyLinkSuccessMessageStr,copyLinkErrorMessageStr,2000,5000)}});$(document).on("click",".scroll_top",function(k){k.preventDefault();if($(".scroll-top-bottom-nav").length&&!$(".item-header-group.sticky").length){var f=$(".scroll-top-bottom-nav").data("comment-id");var g=60;if(f==0){if(fkit.al_f_loaded){var j=$(".ci").last();if(!j.length){return}var d=j.offset().top-g;fkit.al_div.find(".content").animate({scrollTop:d},"slow",fkit.al_fix_top_buttons)}else{$("html, body").animate({scrollTop:$(document).height()},"slow")}}else{var h=$("#comment-"+f);if(fkit.al_f_loaded){var d=h.offset().top-g;fkit.al_div.find(".content").animate({scrollTop:d},"slow",fkit.al_fix_top_buttons)}else{fc.scroll_to_element(h,false)}}}else{$("html, body").animate({scrollTop:0},"slow")}return false});if($(".item-title-group").length&&!fc.isMobileVersion){var c=$(".two-up").height();var a=$(".item-header-group").height();function b(){var h=$(".item-wrap");if(!h.length){return}var l=h.offset(),j=$(window).scrollTop(),g=$(".item-header-group"),k=$(".scroll-top-bottom-nav .fkit_tip.tooltipstered"),f=$(".scroll-top-bottom-nav .bubble");if(j>l.top+$(".two-up").height()){k.tooltipster("content",k.data("top"));f.hide();g.width(h.width()).addClass("sticky");var m=5;$(".item-header-group-plholder").height(a+m);if(!c){if($(".item-bar").length){$(".item-title-group").addClass("no_border")}return}var d=j-l.top;if(d<c){$(".two-up").stop().show();$(".two-up").height(c-d);$(".item-title-group").removeClass("no_border")}else{$(".two-up").stop().hide().height(0);if($(".item-bar").length){$(".item-title-group").addClass("no_border")}}}else{k.tooltipster("content",k.data("bottom"));f.show();if($(".two-up").height()<c){$(".two-up").show();$(".two-up").stop().animate({height:c},100)}if($(".item-bar").length){$(".item-title-group").removeClass("no_border")}$(".item-header-group-plholder").height(0);g.removeClass("sticky");g.attr("style","")}}$(window).scroll(b).trigger("scroll")}$(document).on("mouseenter",".folding_header",function(){if($(this).hasClass("custom")){return}$(this).addClass("hover")});$(document).on("mouseleave",".folding_header",function(){$(this).removeClass("hover")});$(document).on("click",".folding_header",function(h){if($(this).hasClass("custom")){return}var g=$(this).find("a.slidedown");var f=g.data("href");if(f&&!g.parents(".folding_header").siblings(".folding_body").length){var d={};d.item_id=g.data("item-id");ajaxRequest(f,d,function(j){if(j.status=="success"){$(j.data.html).insertAfter(g.parents(".folding_header"));g.addClass("opened");g.parents(".folding_header").siblings(".folding_body").slideDown()}})}else{if(g.parents(".folding_header").siblings(".folding_body").is(":visible")){g.parents(".folding_header").siblings(".folding_body").slideUp();g.removeClass("opened")}else{g.addClass("opened");g.parents(".folding_header").siblings(".folding_body").slideDown()}}});$("body").on("click",".fc_mention, .avatar_with_popup ",function(d){d.stopPropagation();fc.showMentionsPopover($(this))});fc.user_popover_close=function(f){var d=$(".mention_popover");if(d.length>0&&!d.is(f.target)&&d.has(f.target).length===0){d.fadeOut(150).removeClass("bottom");fc.outer_click_type=null}}});jQuery.fn.extend({insertAtCaret:function(a){return this.each(function(d){if(document.selection){this.focus();var f=document.selection.createRange();f.text=a;this.focus()}else{if(this.selectionStart||this.selectionStart=="0"){var c=this.selectionStart;var b=this.selectionEnd;var g=this.scrollTop;this.value=this.value.substring(0,c)+a+this.value.substring(b,this.value.length);this.focus();this.selectionStart=c+a.length;this.selectionEnd=c+a.length;this.scrollTop=g}else{this.value+=a;this.focus()}}})}});function addInsertImageBlock(f,j,a){var d=$("#uploaded_file_"+f);var g=$("<div class='insert_image_block' data-fileID='"+f+"' data-editorID='"+j+"'><div class='insert-text'>Insert Image</div> </div>");var c=$("<a href='#' class='insert_image_link' data-size='thumb'>"+embed_thumb_str+"</a>");if(a=="storage"){var b=$("<a href='#' class='insert_image_link' data-size='medium'>"+embed_medium_str+"</a>");var h=$("<a href='#' class='insert_image_link' data-size='full'>"+embed_full_str+"</a>");g.append(c,b,h)}else{g.append(c)}d.append(g)}function getFCAttachHtml(b,a){return" [fcattach="+b+" type=img size="+a+"]"}function insertAttachmentTag(c){var g=c.parents(".insert_image_block");var b=g.attr("data-fileID");var f=g.attr("data-editorID");var a=c.attr("data-size");var d=getFCAttachHtml(b,a);CKEDITOR.instances[f].insertHtml(d);CKEDITOR.instances[f].execCommand("enter");if($(".file_dialog_list_wrap").length){fc.hideFileDialog()}}function removeAttachmentFromText(d,f){var c=CKEDITOR.instances[f];var b=c.getData();var a=new RegExp("\\[fcattach="+d+".*?\\]","g");b=b.replace(a,"");c.setData(b);c.updateElement()}function initAttachmentsInText(){$(document).off("click",".insert_image_link");$(document).on("click",".insert_image_link",function(a){insertAttachmentTag($(this));return false})}function confirmGroupDelete(f,k,d){f.preventDefault();var c=d.parents(".view_group").find(".group_name").text();$("#group_name").text(c);$("#entity_name").text(k);$(".delete_link_clicked").removeClass("delete_link_clicked");d.addClass("delete_link_clicked");var j=$("#del_c_dialog").data("init-css-top");if(typeof j=="undefined"){j=parseInt($("#del_c_dialog").css("top"));$("#del_c_dialog").data("init-css-top",j)}var a=j;if(!d.parents("div.modal").scrollTop()){var g=parseInt(d.parents("div.modal").outerHeight());var b=parseInt($("#del_c_dialog").outerHeight());var h=parseInt(j)+b;if(h>g){a=parseInt((g-b)/2)}}else{a+=d.parents("div.modal").scrollTop()}$("#del_c_dialog").css("top",a);show_del_c_dialog()}(function(a){a.fn.tipr=function(b){var c=a.extend({speed:200,mode:"bottom"},b);return this.each(function(){var d=".tipr_container_"+c.mode;a(this).hover(function(){var k=c.mode;if(a(this).attr("data-mode")){k=a(this).attr("data-mode");d=".tipr_container_"+k}var f='<div class="tipr_container_'+k+'"><div class="tipr_point_'+k+'"><div class="tipr_content">'+a(this).attr("data-tip")+"</div></div></div>";a(this).append(f);var g=a(d).outerWidth();var j=a(this).width();var h=j/2-g/2;a(d).css("margin-left",h+"px");a(this).removeAttr("title alt");a(d).fadeIn(c.speed)},function(){a(d).remove()})})}})(jQuery);fc.handlePrivateStuff=function(){$(document).on("mouseenter",".private_users_link",function(){$(this).parents(".private_users").find(".users_list").stop().fadeTo("10",0.8)});$(document).on("mouseleave",".private_users_link",function(){$(this).parents(".private_users").find(".users_list").stop().fadeOut(400)})};fc.hashToArray=function(){var c=window.location.hash.slice(1);if(typeof atob=="function"){c=atob(c)}var f=c.split("&");var a,d={};for(var b=0;b<f.length;b+=1){a=f[b].split("=");if(!empty(a[0])){d[a[0]]=a[1]}}return d};fc.arrayToHash=function(d){var b;var c=[];for(var a in d){if(d[a]!==undefined){c.push(a+"="+d[a])}else{c.push(a)}}b=c.join("&");if(typeof btoa=="function"){b=btoa(b)}window.location.hash=b};fc.addToHash=function(a,b){hash_array=fc.hashToArray();hash_array[a]=b;fc.arrayToHash(hash_array)};fc.callWhenReady=function(b,a,c){if(b()){a();return}var d=c+"_callWhenReady";if(typeof window[d]==="undefined"){window[d]=0}window[d]++;if(window[d]<30){setTimeout(function(){fc.callWhenReady(b,a,c)},200);return}else{var f=c+" cannot be called - not ready.";if(fc.debug_info){f+=" Debug info: "+fc.debug_info}window[d]=0;fc.debug_info="";fc.registerError(f,false,true)}};fc.selectText=function(b){if(b.is("input:text")){b[0].select();return}var d=b[0];if(document.body.createTextRange){var a=document.body.createTextRange();a.moveToElementText(d);a.select()}else{if(window.getSelection){var c=window.getSelection();var a=document.createRange();a.selectNodeContents(d);c.removeAllRanges();c.addRange(a)}}};fc.removeHighlightAfterFinish=function(a){if(!a.hasClass("highlighted")){return}if(a.css("background-color")==="rgb(255, 255, 255)"){a.removeClass("highlighted");return}setTimeout(function(){fc.removeHighlightAfterFinish(a)},10)};fc.highlight_elements=function(a){fc.triggerAnimation(a,"highlighted")};fc.triggerAnimation=function(b,a){$("."+a).removeClass(a);b.filter(":visible").each(function(){var c=this;c.style.webkitAnimationName="";c.style.nimationName="";setTimeout(function(){$(c).addClass(a);if(a==="highlighted"){setTimeout(function(){fc.removeHighlightAfterFinish($(c))},50)}},20)})};fc.processBubbleErrors=function(b){$(".error_bubble").each(function(){var c=$(this).data("id");if(typeof b[c]==="undefined"){b[c]=""}});for(var a in b){fc.bubbleError($("#"+a),b[a])}};var bubble_timeouts={};fc.bubbleError=function(b,c,d){d=d||10000;var a=b.siblings(".error_bubble");if(!a.length){a=$("<div></div>");a.data("id",b.attr("id"));a.addClass("error_bubble hide");if(b.hasClass("bubble_block")){b.append(a)}else{b.parents(".bubble_block").append(a)}bubble_timeouts[b.attr("id")]=0}else{clearTimeout(bubble_timeouts[b.attr("id")])}if(!c){if(a.is(":visible")){a.fadeOut("fast")}return}a.html(c);if(c&&!a.is(":visible")){a.fadeIn()}bubble_timeouts[b.attr("id")]=setTimeout(function(){a.fadeOut("slow",function(){a.remove()});delete bubble_timeouts[b.attr("id")]},d+Math.random()*1000);return};fc.isEmpty=function(a){if(typeof a==="undefined"||typeof a==="null"){return false}else{if(typeof a==="object"){var b=a.length;if(b!==0){b=Object.keys(a).length}return !!b}else{return false}}};fc.hideFileDialog=function(){$(".file_dialog_list_wrap").remove();$(".file_dialog.clicked").removeClass("clicked");fc.outer_click_type=null};fc.pd_expanded_on_tablet=false;fc.outer_click_type=null;fc.handleOuterClick=function(b){switch(fc.outer_click_type){case"file_dialog":if(!$(b.target).parents(".file_dialog_list_wrap").length){fc.hideFileDialog()}break;case"share_popup":if(!$(b.target).is("#share_popup")&&!$(b.target).parents("#share_popup").length){fc.hideSharePopup()}break;case"project_actions":if(!$(b.target).is(".cog_container.active")&&!$(b.target).parents(".cog_container.active").length){$(".cog_container.active").removeClass("active");fc.outer_click_type=null}break;case"tasky_datepicker":if(!$(b.target).is(".new_date")&&!$(b.target).parents(".new_date").length){$(".new_date.hasDatepicker div").hide();fc.outer_click_type=null}break;case"dashboard_show_more":if(!$(b.target).is(".hidden_container.opened")&&!$(b.target).parents(".hidden_container.opened").length){$(".hidden_container.opened").removeClass("opened");fc.outer_click_type=null}break;case"dashboard_show_group_actoions":if(!$(b.target).is(".group_actions.opened")&&!$(b.target).parents(".group_actions.opened").length){$(".group_actions.opened").removeClass("opened");fc.outer_click_type=null}break;case"spaces_menu":if(!$(b.target).parents(".fc-spaces-nav").length){var a=angular.element($("[ng-controller=TagsTree]")).scope();a.spacesmenu=false;a.$apply()}break;case"user_popover":fc.user_popover_close(b);break;case"email_in_action_dropdown":$(".action_dropdown").hide();fc.outer_click_type=null;break;case"gantt_actions":if(!$(b.target).parents(".gantt_item_options_list").length&&!$(b.target).is(".gantt_actions_btn")){$(".gantt_item_options_list").hide();fc.outer_click_type=null}break;case"sync_calendar_popups":$(".action_popup").hide();fc.outer_click_type=null;break;case"task_actions_outer_click":if(!$(b.target).parents(".task_actions_dd_content").length){$(".show_task_actions").removeClass("show_task_actions");fc.outer_click_type=null}break;case"global_search":if($(b.target).parents(".fc_search_activate").length||$(b.target).is(".fc_search_activate")){fc.outer_click_type=null;break}if(!$(b.target).is("#global_search_container")&&!$(b.target).parents("#global_search_container").length&&!$(b.target).parents(".flatpickr-calendar").length){fc.closeGlobalSearch();fc.outer_click_type=null}break;default:fc.outer_click_type=null}};fc.show_ajax=true;fc.ajax=function(a){if(a){if(this.show_ajax){$(".pace").addClass("pace-active")}}else{$(".pace").removeClass("pace-active")}};fc.is_suppressed_migration_error=function(c){var a=["use property instead of attribute","jQuery.event.handle is undocumented and deprecated","jQuery.attrFn","jQuery.browser is deprecated"];for(var b=0;b<a.length;b++){if(c.indexOf(a[b])+1){return true}}return false};fc.last_migrate_warnings_count=0;fc.jqueryMigrationCheck=function(){if(!$.migrateWarnings||!$.migrateWarnings.length){return}$.migrateWarnings=$.migrateWarnings.filter(function(a){return !fc.is_suppressed_migration_error(a)});if($.migrateWarnings.length>fc.last_migrate_warnings_count){fc.last_migrate_warnings_count=$.migrateWarnings.length;fc.registerError({jquery_migration_errors:$.migrateWarnings},null,true,"info")}setTimeout(fc.jqueryMigrationCheck,2000)};fc.logEvent=function(c,d,a,f){a=a||"";f=f||false;var g=new Date()-fc.started_ts;var b=["_trackEvent",c,d,a,g];if(!f){fc.registerError({log_event:b},null,true,"info")}if(typeof _gaq!=="undefined"){_gaq.push(b)}};fc.addTimeSpentToForm=function(a){a.append($("<input type='hidden' name='time_on_page'>").val(new Date()-fc.started_ts))};function getCurrentUploadFileUrl(){if(typeof fkit!=="undefined"){if(fkit.modal_opened&&fkit.modal_opened.$modal.find(".url_to_current_unique_modal").length){return $(".url_to_current_unique_modal").val()}else{if(fkit.al_f_loaded){return fkit.al_url_to_project_unique}}}return url_to_current_unique}function initUploadsBlock(a){initAttachmentsInText();fc.callWhenReady(function(){return typeof window.plupload!=="undefined"},function(){$(a).fcUpload()},"plupload")}function resetUploadsBlock(a){$(a).fcUpload("reset")}(function(g){var k=-144;var t={};g.fn.fcUpload=function(z,y){z=z||false;y=y||{};if("destroy"===z||"reset"===z){v(this.first().attr("id"));if("destroy"===z){return}}else{if("external_file"===z){if(y.start){o(y,this.first().attr("id"),true)}else{q(y,y,this.first().attr("id"),true)}return}else{if("get_folders"===z){return t[y.up_id].folders}else{if("update_folders"===z){j(y.up_id,y.folder_id)}}}}s();this.each(function(){d(g(this));n(g(this))});return this};function d(B){var G,F;F=B.attr("id");if(!F){F=plupload.guid();B.attr("id",F)}else{if(t[F]){return true}}var I=".fc_upload_block_template:first";if(B.parents("#import_xls_dialog").length){I="#import_xls_dialog .fc_upload_block_template:first"}B.append(g(I).clone().removeClass("fc_upload_block_template hide"));var J=B.data();var A=getCurrentUploadFileUrl();A+="/"+J.urlsuffix;var z=B.find(".fc_upload_drop");var H=B.find(".fc_upload_ids").attr("name","attached_ids");var y=new Date().getTime();B.data("upload_batch_id",y);var E={application_id:J.appid,item_id:J.itemid,user_id:userid,comment_id:J.commentid,temporary:J.temp,first_version_id:J.firstversion||0,is_ajax:1,group_unique_name:J.groupname||"",upload_batch_id:y};var C={};if(J.max_size){C.max_file_size=J.max_size;C.ds_store=""}J.use_folders=J.use_folders||false;if(J.use_folders){if(!fc.isInputDirSupported()||"chrome"!==fc.getBrowser()){B.find(".folders, .fc_upload_folder").remove();if(!fc.isInputDirSupported()){J.use_folders=false}}}var D={browse_button:B.find(".fc_upload_button").toArray(),drop_element:z[0],url:A+"/upload",multipart_params:E,directory:J.use_folders,multi_selection:J.no_multi?false:true,filters:C,flash_swf_url:cdn_url+"thirdparty/plupload/Moxie.swf",silverlight_xap_url:cdn_url+"thirdparty/plupload/Moxie.xap"};G=new plupload.Uploader(D);G.init();l(G,F);t[F]={uploader:G,fc_ids:[],url:A,ids_input:H,list:B.find(".fc_upload_list"),use_folders:J.use_folders,callback:J.callback,max_size:J.max_size||0,upgrade_url:J.upgrade_url,upload_batch_id:y,folders:[]};z.on("dragenter",function(){g(this).addClass("dragenter")});z.on("dragleave drop",function(){g(this).removeClass("dragenter")});if(B.find(".upsell_drive_actions").length&&!fkit.modal_opened){B.find(".upsell_drive_actions").show()}}function n(y){if(typeof filepicker_api_key!=="undefined"){if(!fc.f_google_picker_loaded){fc.f_google_picker_loaded=true;g.ajax({url:"https://www.google.com/jsapi?key="+filepicker_api_key,dataType:"script",cache:true});g.ajax({url:"https://apis.google.com/js/client.js",dataType:"script",cache:true})}fc.callWhenReady(function(){return(typeof FilePicker==="function"&&typeof gapi==="object"&&typeof gapi.client==="object"&&typeof google==="object")},function(){fc.file_picker=new FilePicker(y)},"picker")}}function a(z,y,A){if("add"===y){t[z]["fc_ids"][t[z]["fc_ids"].length]=A}else{t[z]["fc_ids"].splice(t[z]["fc_ids"].indexOf(A),1)}t[z]["ids_input"].val(t[z]["fc_ids"].join())}function l(z,y){z.bind("FilesAdded",function(A,B){plupload.each(B,function(C){if(C.name.indexOf("icon")===0&&C.name.indexOf(".")===-1&&!C.size){A.removeFile(C)}else{o(C,y)}});A.start()});z.bind("UploadProgress",function(A,B){b(B)});z.bind("Error",function(A,B){if(k===B.code){return}if(plupload.FILE_SIZE_ERROR===B.code){var C=Math.round((t[y].max_size/1024/1024)*100)/100;B.message=max_filesize_str.replace("%d",C)+"<br>";if(t[y].upgrade_url.length){B.message+=upgrade_storage_1_str+" <a class='upload_err_link' href='"+t[y].upgrade_url+"'>"+upgrade_storage_2_str+"</a>"}}fc.displayError({title:upload_error_str,content:B.message,error_id:""},5000)});z.bind("UploadComplete",function(A,B){r(y)});z.bind("FileUploaded",function(A,B,C){q(B,C,y)})}function o(H,A,B){B=B||false;var z=H.id;var D="google"===H.ext_type;var E="onedrive"===H.ext_type;var K="dropbox"===H.ext_type;var I="box"===H.ext_type;var J=g(".fc_upload_item.template:first").clone().removeClass("template");J.attr("id","uploaded_file_"+z);J.data("f_google",D);J.data("f_onedrive",E);J.data("f_dropbox",K);J.data("f_box",I);J.data("f_external",B);J.data("up_id",A);J.find(".filename").text(H.name).attr("title",H.name);if(!D&&!E&&!K&&!I){var C=0;if(typeof H.size!=="undefined"){C=H.size}J.find(".filesize").text("("+fc.humanizeFileSize(C)+")")}J.data("pl_file_id",z);var G=c(A,H);J.data("folderid",G);if(false===G){t[A]["list"].append(J)}else{var y=t[A]["list"].find("#folder_"+A+"_"+G).show();y.find(".folder_files").append(J);x(A)}if(B){var F=20;J.data("f_server_progress",F);u(J);if(H.cke_placeholder){J.data("cke_placeholder",H.cke_placeholder)}}J.find(".file_upload_cancel").click(function(){p(J)});g("#"+A).parents("form").find("input:submit").prop("disabled",true);if(fc.addFileToListCallback){fc.addFileToListCallback(J)}}function c(B,z){if(!t[B].use_folders){return false}var C="/";if(typeof z.getSource!=="undefined"){var A=z.getSource();if(A&&A.relativePath){C=fc.getDirPath(A.relativePath)}}var y=t[B].folders.indexOf(C);if(y>=0){return y}return w(B,C)}function x(z){var y=t[z]["list"].find(".fc_upload_folder:visible").length<2;t[z]["list"].find(".root_folder").toggleClass("alone",y)}function w(A,B){var y=t[A].folders.length;t[A].folders[y]=B;var z=g(".fc_upload_folder.template:first").clone().removeClass("template");z.attr("id","folder_"+A+"_"+y).find(".folder_path").text(B);if(fc.isRootPath(B)){z.addClass("root_folder")}t[A]["list"].append(z);x(A);return y}function j(A,y){if(false===y){return}var z=g("#folder_"+A+"_"+y);if(!z.find(".fc_upload_item").length){z.hide()}x(A)}function f(A){var y=A.data("folderid");var z=A.data("up_id");A.remove();j(z,y)}function q(F,A,C,D){D=D||false;var B=F.id;if(D){E=A;B=F.temp_id}else{var z=g.parseJSON(A.response);var E=z.data}var G=g("#uploaded_file_"+B);if(399===A.status){f(G);fc.showRestoreSession();return false}var y=t[C].upload_batch_id;E.upload_batch_id=y;if(!D&&z.status==="error"){f(G);fc.displayError({title:upload_error_str,content:z.message,error_id:""},5000);return false}if(G.data("cke_placeholder")){G.data("cke_placeholder",false)}G.attr("id","uploaded_file_"+E.id);G.data("fc_file_id",E.id);G.data("f_server_progress",100);G.find(".fc_progress_bar").css("width","100%");setTimeout(function(){G.find(".fc_progress").hide();if(E.is_image){m(E.id,G,E.location)}if(t[C].callback){E.up_id=C;E.folder_id=G.data("folderid");window[t[C].callback](E);return}},200);a(C,"add",E.id)}function r(y){g("#"+y).parents("form").find("input:submit").prop("disabled",false)}function m(B,A,z){var y=A.parents("form").find(".attach_target, .fkit_editor").attr("id");if(y){addInsertImageBlock(B,y,z)}}function u(A){var z=95;var y=A.data("f_server_progress");if(!y||y>=z){return}var B=y+(z-y+1)/10;B=Math.round(B*100)/100;A.data("f_server_progress",B);A.find(".fc_progress_bar").css("width",B+"%");setTimeout(function(){u(A)},200)}function b(y){var B=85;var A=g("#uploaded_file_"+y.id);if(A.data("f_server_progress")){return}var z=((100-B)*y.percent)/100;A.find(".fc_progress_bar").css("width",z+"%");if(y.percent===100){A.data("f_server_progress",z);u(A)}}function p(I){var z=I.data("pl_file_id");var B=I.data("fc_file_id");var C=I.data("up_id");var F=t[C]["uploader"];var E=I.data("f_external");var y=t[C].upload_batch_id;if(!E){var A=F.getFile(z);var J=A.status;F.removeFile(A);if(F.state===plupload.STARTED&&J===plupload.UPLOADING){F.stop();F.start()}}if(B){var H=I.parents("form").find(".attach_target, .fkit_editor").attr("id");if(H){removeAttachmentFromText(B,H)}var G=B;var D={upload_batch_id:y};if(isNaN(parseInt(B,10))){D.local_file_id=B;G="local"}ajaxRequest(t[C]["url"]+"/delete_file/"+G,D,function(){a(C,"remove",B)})}else{if(I.data("cke_placeholder")){I.data("cke_placeholder").text("").data("cancelled",true)}}f(I);if(fc.onUploadCancelCallback){fc.onUploadCancelCallback(I)}}function v(z){if(typeof z==="undefined"){return}var y=t[z].uploader;delete t[z];y.destroy();g("#"+z).html("")}var h=false;function s(){if(h){return}h=true;plupload.addFileFilter("ds_store",function(z,A,y){if(".DS_Store"===A.name){this.trigger("Error",{code:k,message:".DS_Store file is skipped.",file:A});y(false)}else{y(true)}})}})($);fc.humanizeFileSize=function(a){if(typeof a==="undefined"||!parseInt(a)){a=0}var d=1024;if(a<d){return a+" B"}var b=["KB","MB","GB"];var c=-1;do{a/=d;++c}while(a>=d);return a.toFixed(1)+" "+b[c]};fc.isInputDirSupported=function(){var a=document.createElement("input");return("webkitdirectory" in a||"mozdirectory" in a||"odirectory" in a||"msdirectory" in a||"directory" in a)};fc.set_view_type=function(b,a){a=a||store.get(b)||"compact";$(".view_togglers .btn").removeClass("is-active");$(".view_togglers ."+a).addClass("is-active");$("#content").removeClass("minimal compact full").addClass(a);store.set(b,a)};fc.process_url_hash=function(){if(window.location.hash){var a=window.location.hash;if("#_=_"===a||"#/_=_"===a){history.pushState("",document.title,window.location.pathname+window.location.search);return}if(typeof fc.no_scroll_to_hash!=="undefined"){return}fc.scroll_to_hash(a)}};fc.scroll_to_hash=function(c,a){if(typeof a==="undefined"){a=10}var b=$(c);if(!b.length){return}if(!b.is(":visible")&&a){setTimeout(function(){fc.scroll_to_hash(c,--a)},100);return}var d=$(".comments_list");if(d.length){fc.scroll_when_images_loaded(b)}else{fc.scroll_to_element(b)}};fc.scroll_when_images_loaded=function(d){var c=$(".comment_content img");var a=c.length;if(!a){fc.scroll_to_element(d);return}var b=5000;var f=setTimeout(function(){clearTimeout(f);fc.scroll_to_element(d);f=null},b);c.each(function(){$(this).load(function(){a--;if(!f){return}if(!a){fc.scroll_to_element(d);clearTimeout(f);f=null}})})};fc.scroll_to_element=function(a,b){$("html, body").animate({scrollTop:a.offset().top-155},1000,function(){if(!b){fc.highlight_elements(a)}});history.replaceState({},document.title,window.location.pathname+window.location.search)};fc.showSharePopup=function(){if(fc.isMobileVersion){return false}ajaxRequest(site_url("dashboard/share_popup"),{},function(a){$("body").append(a.data.html);$(".lighten").css("opacity","1").fadeIn("slow");$("#share_popup").fadeIn("slow")})};fc.hideSharePopup=function(){$(".lighten").attr("style","");$("#share_popup").fadeOut();fc.outer_click_type=null};fc.nl2br=function(a){return(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")};fc.isTabletScreen=function(){var a=window.getComputedStyle(document.body,":after").getPropertyValue("content");if(a.indexOf("tablet")+1){return true}return false};fc.getCookie=function(a){var b="; "+document.cookie;var c=b.split("; "+a+"=");if(c.length===2){return c.pop().split(";").shift()}};fc.setCookie=function(b,g,c){var f=new Date();if(!$.isNumeric(c)){c=30}f.setTime(f.getTime()+c*24*60*60*1000);var a="expires="+f.toUTCString();document.cookie=b+"="+g+"; "+a+";path=/"};fc.log_vz=function(a){if(fc.getCookie(vz_cookie_name)){return}ajaxRequest(base_url+"log_vz/"+a)};fc.blink=function(c,a,b){if(!c.length){return}if(a){c.data("blinking",false);return}if(b){if(c.data("blinking")){c.animate({opacity:0.2},500).delay(200).animate({opacity:1},800,function(){fc.blink(c,false,true)}).delay(100)}else{c.attr("style",c.data("blink_before_style"))}return}if(c.data("blinking")){return}c.data("blinking",true).data("blink_before_style",c.attr("style")||"");setTimeout(function(){fc.blink(c,false,true)},400)};function clone_callback(a){$("form.clone_form").find("#subm_btn, #prev_btn").fadeOut("slow",function(){$("form.clone_form").find("#ok_btn").fadeIn()});var b=$("form.clone_form").find("#success_msg").html();b=b.replace("%PROJ_NAME%",a.data.project_name);b=b.replace("%NEW_PROJ_NAME%",a.data.new_project_name);$("form.clone_form").find("#success_msg").html(b);$("form.clone_form").find("#step_3").fadeOut("slow",function(){$(".modal > .form").find("#cl_wiz_ttl").fadeOut("fast");$("form.clone_form").find(".cancel").fadeOut("fast");$("form.clone_form").find("#step_4").fadeIn()});$("#temp_cover_ajax").remove();$(".loader_img").hide()}fc.isRootPath=function(a){return a==="/"||a==="\\"};fc.getDirPath=function(d,a){a=a||false;var b=/[^\/]*$/;d=d.replace(b,"");if(!fc.isRootPath(d[d.length-1])){d=d+"/"}if(!a||fc.isRootPath(d)){return d}var f=d.split("/");var c="/"+f[f.length-2]+"/";return c};fc.improveCKEditor=function(b,c){c=c||false;try{var a=$(b).ckeditorGet()}catch(d){return}fc.addCtrlEnterKeystroke(a);fc.trimFCLinksHandling(a);if(!c){fc.addPasteImagesHandling(a)}};fc.addCtrlEnterKeystroke=function(a){a.addCommand("submitOnCrtlEnter",{exec:function(b){$("#"+b.name).parents("form").submit();b.execCommand("removeAutoSaveStorage")}});a.keystrokeHandler.keystrokes[CKEDITOR.CTRL+13]="submitOnCrtlEnter"};fc.addPasteImagesHandling=function(a){a.on("paste",function(b){return fc.handleCKEPaste(b)})};fc.cke_custom_link_inited=false;fc.initCustomizeEditorLink=function(){if(fc.cke_custom_link_inited){return}fc.cke_custom_link_inited=true;if(fc.cke_btns_cnt>6){return}CKEDITOR.on("instanceReady",function(b){if(b.editor.name.indexOf("wiki")+1){return}var a=$("#cke_"+b.editor.name);if(a.parents("field").length&&a.parents(".group").length){var c=$("<a class='cke_customize_lnk' target='_blank' href='/manage/account#custom_cke' tabindex='-1'>Customize buttons</a>");a.find(".cke_top").append(c)}})};fc.trimFCLinksHandling=function(a){a.on("paste",function(g){if(g.data.dataValue.indexOf("<a")==-1){return}var d=$(g.data.dataValue);if(d.attr("href")){var f=d.attr("href");var c=d.text();if(f!==c){return}var b=window.location.protocol+"//"+window.location.host;var h=new RegExp(b+"?[a-z0-9/&.;%+#?=_-]+","i");if(f.match(h)){g.data.dataValue=c}}})};fc.getPastedImageProperties=function(a){var b=a.data();var c={application_id:b.appid,item_id:b.itemid,comment_id:b.commentid,temporary:b.temp,first_version_id:0,is_ajax:1,f_cke_paste:1,upload_batch_id:b.upload_batch_id};return c};fc.getFileFromInlineImg=function(b){if(!b.data.type||b.data.type!=="html"){return false}var g=b.data.dataValue;if(!g.match(/<img(.*?) src="data:image\/.{3,4};base64,.*?"(.*?)>/)){return false}match=g.match(/"(data:image\/(.{3,4});base64,.*?)"/);if(!match){return false}var k=match[1];var d=match[2].toLowerCase();var h=atob(k.split(",")[1]);var j=new Array(h.length);for(var f=0;f<h.length;f++){j[f]=h.charCodeAt(f)}var c=new Uint8Array(j);var a=new Blob([c],{type:"image/"+d});return a};fc.handleCKEPaste=function(f){if(f.data.dataValue.indexOf("fc_mention")!==-1){return true}if(f.data.dataValue.indexOf('<img src="webkit-fake-url:')!==-1){return false}var d=f.data.dataTransfer._.files;if(!d.length){var c=fc.getFileFromInlineImg(f);if(!c){return true}d[0]=c}var a=/image\/(jpeg|png|gif|bmp)/;for(var b=0;b<d.length;b++){if(null===d[b].type.match(a)){continue}fc.handlePastedImage(d[b],f)}return false};fc.getUploadBlockByEditorElement=function(d){var c=$(d);var b=c.parents("fieldset");if(!b.length){b=c.parents(".add_new_comment")}if(!b.length){return false}var a=b.find(".fc_upload_block");if(!a.length){return false}return a};fc.handlePastedImage=function(g,f){var j=f.editor;var a=j.element.$;var n=fc.getUploadBlockByEditorElement(a);if(!n){fc.registerError("handlePastedImage() - no up block",false,true,"error");return false}var s=fc.getPastedImageProperties(n);if(!s){fc.registerError("handlePastedImage() - no options",false,true,"error");return false}if(!fc.cke_pasted_number){fc.cke_pasted_number=0}fc.cke_pasted_number++;var l="",r="";if(fc.cke_pasted_number>1){l=" #"+fc.cke_pasted_number;r="_"+fc.cke_pasted_number}var d="pasted"+r+"."+g.type.replace("image/","");var h=new FormData();h.append("file",g,d);for(var p in s){h.append(p,s[p])}var c="[uploading pasted image"+l+"...]";var m="<p>"+c+"<p>";j.insertHtml(m);var k=$(j.editable().$).find("p:contains('"+c+"')");var q="p_"+Math.round(Math.random()*1000);var o={id:q,name:d,ext_type:"ckepaste",size:g.size,cke_placeholder:k,start:true};n.fcUpload("external_file",o);var b=getCurrentUploadFileUrl();ajaxRequest(b+"/files_rest/upload",h,function(t){if(k.data("cancelled")){k.remove();j.updateElement();return}t.data.temp_id=q;t.data.start=false;n.fcUpload("external_file",t.data);var u=getFCAttachHtml(t.data.id,"full");k.text(u);j.updateElement()},{f_form_data:true})};fc.saveTimezoneChanges=function(b,c){var a={};a.new_timezone=b.new_timezone;a.update_profile=c||"0";$("#agree, #notAgree").unbind("click");ajaxRequest(base_url+"manage/account/set_timezone",a,function(){$("#timezone_popup").removeClass("md-show");$(".lighten").attr("style","")})};fc.timezoneWork=function(){var a=store.get("usersTimezonesChangeCheckDates");if(!a||!a[userid]){fc.getUserActionDateAndSetLocalStorage()}else{fc.checkTimeToShow(a)}};fc.getUserActionDateAndSetLocalStorage=function(){var a=store.get("usersTimezonesChangeCheckDates");a=!a?{}:a;ajaxRequest(base_url+"manage/account/get_time_action",{},function(b){a[userid]=b.data;store.set("usersTimezonesChangeCheckDates",a);fc.checkTimeToShow(a,true)})};fc.checkTimeToShow=function(d,c){c=c||false;var b=new Date();var a=b.format("dd-mm-yyyy");if(c||d[userid]!=a){fc.checkTimezoneChange();d[userid]=a;store.set("usersTimezonesChangeCheckDates",d)}};fc.checkTimezoneChange=function(){if(fc.isMobileVersion){return false}var a={};var b=new Date().getTimezoneOffset();var c={};a.current_offset=-b;ajaxRequest(base_url+"manage/account/check_timezone",a,function(f){c={new_timezone:f.data.current_timezone};if(f.data.show_popup){var d=$(".md-content").height();$(".md-content").css("margin-top",-d/2);$("#timezone_popup").addClass(" md-show");$(".lighten").css("opacity","1").fadeIn();$("#userSystemTimezone").html($("#userSystemTimezone").text()+f.data.system_user_timezone_str);$("#curTimeZone").html($("#curTimeZone").text()+f.data.current_timezone_str+" ?");$("#agree").click(function(){fc.saveTimezoneChanges(c,1)});$("#notAgree").click(function(){fc.saveTimezoneChanges(c)})}})};jQuery.fn.highlight=function(b){function a(f,k){var m=0;if(f.nodeType==3){var l=f.data.toUpperCase().indexOf(k);l-=f.data.substr(0,l).toUpperCase().length-f.data.substr(0,l).length;if(l>=0){var j=document.createElement("span");j.className="highlight";var g=f.splitText(l);var c=g.splitText(k.length);var d=g.cloneNode(true);j.appendChild(d);g.parentNode.replaceChild(j,g);m=1}}else{if(f.nodeType==1&&f.childNodes&&!/(script|style)/i.test(f.tagName)){for(var h=0;h<f.childNodes.length;++h){h+=a(f.childNodes[h],k)}}}return m}return this.length&&b&&b.length?this.each(function(){a(this,b.toUpperCase())}):this};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;with(this.parentNode){replaceChild(this.firstChild,this);normalize()}}).end()};jQuery.expr[":"].Contains=function(c,d,b){return(c.textContent||c.innerText||"").toUpperCase().indexOf(b[3].toUpperCase())>=0};fc.filterByTextTimer=null;fc.filterByText=function(d,f,b,a,c){c=c||15;if($(b).length>c){$(d).removeClass("hide");$(d).on("keyup",f,function(g){var h=$(this).val();clearTimeout(fc.filterByTextTimer);fc.ajax(true);if(h){fc.filterByTextTimer=setTimeout(function(){$(b).find(a+":not(:Contains("+h+"))").parent().slideUp();$(b).find(a+":Contains("+h+")").parent().slideDown();fc.ajax(false)},480)}else{$(b).slideDown();fc.ajax(false)}})}else{$(d).hide()}};jQuery.fn.scrollTo=function(a,b,c){c=c||0;a=typeof a==="string"?$(a):a;if(a.length==0){return false}$(this).animate({scrollTop:$(this).scrollTop()-$(this).offset().top+a.offset().top-c},b==undefined?1000:b);return this};$.fn.hasScrollBar=function(){var a=this.get(0);return{vertical:a.scrollHeight>a.clientHeight,horizontal:a.scrollWidth>a.clientWidth}};var collapsed_group_prefix="collapse_groups_";$(document).on("click",".collapsing_title:not(.tasks_collapse)",function(h){if($(h.target).parents(".section_header_actions").length){return true}var b=$(this);var a=b.siblings(".collapsed_group_table");var g=a.data("groupid");var d=collapsed_group_prefix+a.data("appid")+"_"+userid;var f=fc.getCollapsedApplicationGroupIds(d);var c=f.indexOf(g);if(c!=-1){f.splice(c,1);a.show()}else{f.push(g);a.hide()}store.set(d,f,true);b.toggleClass("collapsed")});fc.getCollapsedApplicationGroupIds=function(a){var b=store.get(a);return b?b:[]};fc.prepareApplicationsGroups=function(){var a=$(".collapsed_group_table");var b=collapsed_group_prefix+a.first().data("appid")+"_"+userid;var c=fc.getCollapsedApplicationGroupIds(b);if(empty(c)){return}a.each(function(){var d=$(this);var f=d.data("groupid");if(c.indexOf(f)!=-1){d.hide().parent().find(".collapsing_title").addClass("collapsed")}})};fc.disableElem=function(a){a.addClass("disabled").prop("disabled",true)};fc.enableElem=function(a){a.removeClass("disabled").removeAttr("disabled")};fc.execCopyCommand=function(c,f,j,h,d){c.select();var b=h||2000;var a=d||2000;try{if(!document.execCommand("copy")){throw {}}$.flash_action(f,b)}catch(g){$.flash_action(j,a)}};fc.isStorageTimestampActive=function(b){var a=parseInt(store.get(b))||0;var c=new Date().getTime();return a>c};fc.hasCJKChar=function(a){return a.match(String.sprintf("[\\u{0}-\\u{1}]",fc.unicode_cjk_range[0],fc.unicode_cjk_range[1]))?true:false};fc.prepareRecurrenceHandlers=function(h,k,d){var a=h||null;var j=$(k+" textarea[name=r_rule]").val();var n=1000;var g=null;$(k+" #next_occur_date").show();if(a){c(k)}var l=$(d);l.each(function(){if($(this).data("inited")){return true}$(this).click(function(q){var p=0;if($(this).hasClass("event_add_btn")){p=1}f(q,k,$(this),p);$(this).data("inited",true)})});function o(){var s=$(k+" textarea[name=r_rule]").val();if(!s){return true}var q=true;var p=$(k+" .tasks_check_r_rule_url").val();var r=$(k+" input[name='todo_due_date']").val();if(!p){p=url_to_project_unique_name+"/todos/check_next_occurrence/"}else{var q=f_add}ajaxRequest(p,{r_rule:s,f_add:q,f_return_date_hint:true,date_entered:r},function(t){if(t.data.date_str){$(k+" #next_occur_date").text(t.data.date_str)}})}$(k+" textarea[name=r_rule], input[name='todo_due_date']").change(function(){if($(k).hasClass("add_edit_event_form")){return true}clearTimeout(g);g=setTimeout(o,n)});$(k+" .repeat_chbx").change(function(){if($(this).prop("checked")){$(".repeat_chbx").not($(this)).prop("checked",false).change();c(k);$(k+" .risavebutton").click();$(k+" .next_occur_date").show()}else{b(k)}});function c(p){if(j){$(p+" #r_rule_todo").val(j)}fc.callWhenReady(function(){return typeof $().recurrenceinput==="function"},function(){$(p+" textarea[name=r_rule]").recurrenceinput({firstDay:week_first_day,maxOccurNumber:EVENTS_MAX_OCCUR_NUMBER,form_name:p})},"recurrenceinput");$(p+" #riedit").click()}function b(p){j=$(p+" textarea[name=r_rule]").text();$(p+" #ridelete").click();$(p+" textarea[name=r_rule]").unbind().removeData();$(".ridisplay, .rioccurrences, .riform").remove();$(p+" #next_occur_date").parent().hide();$(p+" #r_rule_todo").val("");$(p+" .next_occur_date").hide()}function f(w,x,p,r){w.preventDefault();w.stopPropagation();if($(x+" .riform #messagearea").is(":visible")){fc.highlight_elements($(x+" .riform #messagearea"));return false}if(r){m(x);return}var s=0;if($(x+" #f_ended_recurrence").length){s=parseInt($(x+" #f_ended_recurrence").val())}var t=$(x+" .repeat_chbx").prop("checked");var v=$(x+" textarea[name=r_rule]").val();if(!v||(!t&&s)){m(x);return}var q=$(x+" .tasks_check_r_rule_url").val();var u=1;if(!p.hasClass("submit_inline")){u=f_add}else{q=url_to_project_unique_name+"/todos/check_next_occurrence/"}ajaxRequest(q,{r_rule:v,f_add:u},function(y){if(y.data.message){p.settings={deleteCallback:function(){m(x)}};fkit.confirmationGeneratePopup(p,y.data.message,delete_confirm_lang);return}else{m(x)}})}function m(q){$(q+" .r_rule_str").val($(q+" .recurrency_block label.ridisplay").text());var p=$(q);$(this).addClass("disabled");p.find("input:disabled").attr("disabled",false);p.submit()}};fc.addAjaxCoverToModalForm=function(){var a=$('<div id="temp_cover_ajax"><img src="'+cdn_url+'images/ajax-loader.gif" style="position:absolute; top:50%; left:50%;" /></div>');$(".modal .form").append(a)};fc.removeAjaxCoverFromModalForm=function(){$("#temp_cover_ajax").remove()};fc.validateEmail=function(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(String(a).toLowerCase())};fc.initSwitcherRow=function(d,c){var b=$("#"+d+" button");var a=$('input[name="'+c+'"]');b.click(function(){b.removeClass("is-active");$(this).addClass("is-active");a.val($(this).data("value"))})};fc.togglePublicProjectsRow=function(a){$(".public_projects_row").toggle(fc.pp_permissions[a]);if(!fc.pp_permissions[a]){set_public_project_switcher_value(false)}};fc.getSelectedGroupOwnerId=function(){var a=userid;if($(".group_dropdown").is(":visible")){a=parseInt($(".group_dropdown").find(":selected").data("ownerid"),10)}return a};function PrintElem(a,c){var b=window.open("","PRINT","_blank");b.document.write("<html><head><title>"+document.title+"</title>");b.document.write("</head><body >");b.document.write("<h1>"+c+"</h1>");b.document.write(document.getElementById(a).innerHTML);b.document.write("</body></html>");b.document.close();b.focus();b.print();b.close();return true}function on_feedback_submit(){fkit.modal_opened.fkit_modal_close();var a;if(typeof lng_feedback_sent!=="undefined"){a=lng_feedback_sent}else{a="You have successfully contacted us."}$.flash_action(a)}fc.closeGlobalSearch=function(){$("#global_search_container").removeClass("al_container_left_open")};fc.openGlobalSearch=function(){fkit.al_close();$("#global_search_container").addClass("al_container_left_open");fc.outer_click_type="global_search";if(fc.f_global_search_loaded){return}fc.showSpinner($("#global_search_container"));ajaxRequest("/dashboard/global_search",{},function(a){fc.hideSpinner($("#global_search_container"));$("#global_search_container").html(a.data.html);fc.f_global_search_loaded=!fc.f_dev_mode},{type:"GET"})};fc.showSpinner=function(c){if(!c){$(".full_page_spinner").fadeIn();return}var b='<div class="spinner-xl"></div>';var a='<div class="disable-overlay"></div>';c.append(b);c.prepend(a);c.data("previous-overflow",c.css("overflow"));c.css("overflow","hidden");c.children().css("opacity",0.5);c.find(".disable-overlay").height(c[0].scrollHeight+"px")};fc.hideSpinner=function(a){if(!a){$(".full_page_spinner").fadeOut();return}a.find(".spinner-xl, .disable-overlay").remove();a.css("overflow",a.data("previous-overflow"));a.children().css("opacity",1)};fc.scrollToTop=function(a,c){if(!a){a=$("html, body")}if(!c){a.animate({scrollTop:0});return}var b=a.offset();if(!b){return}window.scrollTo(0,b.top)};fc.isArray=function(a){return a.constructor===Array};fc.currentDate=function(){return new Date().format(dateFormat.masks.mediumDate)};fc.forbidDblClick=function(a){$(document).on("click",a,function(b){if($(this).data("clicked")){return false}$(this).data("clicked",1);return true})};fc.handle_lgt_if_needed=function(){const a=new URLSearchParams(window.location.search);const b=a.get("f_lgt");if(!b){return}window.localStorage.removeItem("lscache-rootstore")};if(fc.f_common_footer){fc.app_data={discussions:{edit:"true",width:"700",singular:disc_title_str},files:{width:"560",singular:file_title_str},milestones:{singular:mile_title_str},time:{singular:time_title_str},todos:{edit:"true",width:"800",singular:task_title_str},bugtracker:{edit:"true",width:"700",singular:issue_title_str},calendar:{width:"800",singular:calendar_title_str},wiki:{edit:"true",type:"advanced",width:"700",singular:wiki_title_str},crm:{}}}var time_ids=new Array();var refreshAfterClose=false;function show_msg_popup(a,b){if(fc.isIpad){alert("Notification message can't be shown on this mobile device. Please use other device.");return}popup_open=true;$(".lighten").css("opacity","1").fadeIn();$("#"+a).find(".main_text").html(b);$("#"+a).fadeIn();$("[autofocus]").focus()}function hide_msg_popup(a){jQuery(document).trigger("close_modal_popup_event");popup_open=false;$(".lighten").attr("style","");$("#"+a).fadeOut("slow")}fc.f_date_pre_inited=false;function set_date_for_calendar(){if(fc.f_date_pre_inited){return}if(!fc.selected_calendar_date.scheduler){$(document).on("datepickerLoaded",".todo_add_popup #todo_due_date, .milestone_add_form #due_date, .add_edit_event_form.form_type_add #date_start, .add_edit_event_form.form_type_add #date_end, .bt_form.form_type_add #issue_due_date, .crm_task_add_form #due_date",function(){if(!$.isEmptyObject(fc.selected_calendar_date)){var a=fc.selected_calendar_date.year+"-"+fc.selected_calendar_date.month+"-"+fc.selected_calendar_date.day;$(this)[0].picker.setDate(a);fc.f_date_pre_inited=true;setTimeout(function(){fc.selected_calendar_date={}},1000)}})}else{$(document).one("datepickerLoaded",".add_edit_event_form.form_type_add #date_start, .todo_add_popup #todo_start_date",function(){if(!$.isEmptyObject(fc.selected_calendar_date)){$(this)[0].picker.setDate(fc.selected_calendar_date.start);if(fc.selected_calendar_date.isAllDay===false){var a=$(this).closest("form");if(a.find("#all_day_check").length){var b=a.find("#all_day_check")[0];b.checked=fc.selected_calendar_date.isAllDay;$(b).trigger("change");$(a.find("#time_from")).timepicker("setTime",fc.selected_calendar_date.start);$(a.find("#time_to")).timepicker("setTime",fc.selected_calendar_date.end)}}setTimeout(function(){fc.selected_calendar_date={};fc.f_date_pre_inited=false},1000)}});$(document).one("datepickerLoaded",".add_edit_event_form.form_type_add #date_end, .todo_add_popup #todo_due_date, .milestone_add_form #due_date, .bt_form.form_type_add #issue_due_date, .crm_task_add_form #due_date",function(){if(!$.isEmptyObject(fc.selected_calendar_date)){$(this)[0].picker.setDate(fc.selected_calendar_date.isAllDay===false?fc.selected_calendar_date.end:new Date(fc.selected_calendar_date.end-1))}})}}function is_editor_ready_for_insert(b){var a=CKEDITOR.instances[b];return a?true:false}function on_quick_add(a){if(window.homePageQuickAddReload&&typeof window.homePageQuickAddReload==="function"&&window.location.pathname==="/dashboard/home"){window.homePageQuickAddReload()}if(a.data.callback&&typeof window[a.data.callback]==="function"){window[a.data.callback](a);return}fkit.modal_opened.fkit_modal_close();$.flash_action(a.data.message,4000);if(fc.f_reload_after_quick_add){location.reload()}if(fc.f_callback_on_success){fc.f_callback_on_success(a)}}$(function(){$(".tip").tipr();$(document).on("click",".file_action:not(.delete,.disabled)",function(){fc.hideFileDialog()});$(document).on("click",".file_dialog",function(v){v.preventDefault();fc.hideFileDialog();$(this).addClass("clicked");var j=$(this);var p=j.data("download-name")||download_file_str;var u="";var g=$(this).closest(".attachments-pane").data("editorid");var t=g&&is_editor_ready_for_insert(g);var q=j.data("insert-attachments")&&t;var o=j.data("fversion-id");var m=j.data("groupfile");u+='<div class="file_dialog_list_wrap'+(q?" with_insert":"")+'" data-fversion-id="'+o+'" data-groupfile="'+m+'"><img src="'+cdn_url+'images/files/dialog_arrow.png" class="dialog_arrow" /><ul class="file_dialog_list">';if(j.data("files-online-edit")){u+='<li class="f_online_edit"><a data-fileid="'+j.data("fileid")+'" data-first_version_id="'+o+'"  href="#" data-timestamp="'+j.data("timestamp")+'" class="file_action action offline_edit"><span>&nbsp;</span>'+file_online_edit_str+"</a></li>"}u+='<li class="f_download_file"><a class="file_action" href="'+j.data("download-href")+'" target="_blank" ><span>&nbsp;</span>'+p+"</a></li>";if(j.data("files-access")){var l=fkit.al_f_loaded?fkit.al_url_to_project_unique:url_to_project_unique_name;var s=l+"/files/versions/"+o;u+='<li class="f_view_versions"><a class="file_action" href="'+s+'"><span>&nbsp;</span>'+file_versions_str+"</a></li>"}if(j.data("files-can-delete")||m){if(t){u+='<li class="f_delete"><a class="file_action disabled" style="color: lightgray" title="'+fileDeleteDisabledHintStr+'" ><span class="no_hover">&nbsp;</span>'+file_delete_str+"</a></li>"}else{u+='<li class="f_delete"><a class="file_action delete" href="#" data-callback="deleteAttachedFile"><span>&nbsp;</span>'+file_delete_str+"</a></li>"}}if(q){var d=$(this).data("location")||"";var k=d!="storage"?'style="width: 100%;"':"";var f="<a "+k+' class="insert_image_link" data-size="thumb">'+embed_thumb_str+"</a>";var c=d=="storage"?'<a class="insert_image_link" data-size="medium">'+embed_medium_str+"</a>":"";var n=d=="storage"?'<a class="insert_image_link" data-size="full">'+embed_full_str+"</a>":"";var h=j.data("fileid");u+='<li class="f_insert_comment"><div class="file_action insert_image_block" data-fileid="'+h+'" data-editorid="'+g+'"><div class="insert_title file_action">'+embed_label_str+"</div>"+f+c+n+'<div class="clear"></div></div></li>'}u+="</ul></div>";$("body").append(u);var r=$(".file_dialog_list_wrap").height()/2;$(".file_dialog_list_wrap").css({left:v.pageX+20,top:v.pageY-r});fc.outer_click_type="file_dialog";initAttachmentsInText()});start_timers();if(typeof $().timeago==="function"){$(".timeago").timeago()}$(document).on("click",".control",function(g){g.preventDefault();var f=$(this);var d=$(this).parents(".time_widget_item");var c=f.data("href");if(!$.trim(c).length){return}ajaxRequest(c,{total_time:$("#total_time").val()},function(k){var h=d.find(".time_widget_control");var j=$(".timer_widget").find(".control_link").val();var m=d.attr("data-id");if(f.hasClass("start")){w_start(m);h.html('<a class="stop control" data-href="'+j+"stop/"+m+'"></a>')}else{w_stop(m);h.html('<a class="start control" data-href="'+j+"start/"+m+'"></a>');var l=k.data;$(".total_time .hours").text(l.total_time_hours);$(".total_time .mins").text(l.total_time_mins);$("#time_"+m+" .hours").text(l.time_hours);$("#time_"+m+" .mins").text(l.time_mins);$("#total_time").val(l.total_time)}if(time_ids.length>0){$(".global_action_link.timer_activate").addClass("active")}else{$(".global_action_link.timer_activate").removeClass("active")}f_time_buttons_disabled=false})});$(".quick_add_widget").on("click","a.fc-selector",function(){if(typeof $(this).data("project-url")==="undefined"){return}var c=$(this).parent(".fc-proj-select");if(c.hasClass("active")){c.find(".fc-group-project-list").fadeOut(300,function(){c.removeClass("active");$("#proj_app_list").fadeIn()})}else{c.addClass("active");$("#proj_app_list").fadeOut(300,function(){c.find(".fc-group-project-list").fadeIn()})}});$(".quick_add_widget").on("click",".fc_project_link",function(){var h=$(this);var c=$(".quick_add_widget").find(".fc-selector");var k=$(this).data("uname");c.data("project-url",$(this).data("href"));c.find(".project-name").text($(this).find(".name").text());$("#proj_app_list").html("");if(typeof h.parents(".quick_add_widget").data("selected-app")!=="undefined"){var j=h.parents(".quick_add_widget").data("selected-app");if(j.length>0){h.parents(".quick_add_widget").data("selected-app","");quick_add_open_popup_app(j);return}}var f=project_apps_ar[k];for(var g=0;g<f.length;g++){var l=f[g].unique_name;if(!fc.app_data[l]){continue}var d=fc.app_data[l].singular;$("#proj_app_list").append('<div class="row" data-unique-name="'+l+'"><table><tr><td class="icon"><span class="app_name app_'+l+'"></span></td><td class="title">'+d+"</td></tr></table></div>")}c.click()});$(document).on("click","#proj_app_list .row, .group_app_quick_add",function(){quick_add_open_popup($(this))});$(document).on("click",".user a.meta",function(c){c.stopPropagation();fc.toggleUserMenu()});var b=$(".flash_message").text().trim();if(b!=""){a(b)}function a(d){var c=$(".flash_message");c.html(d);c.slideDown().delay(10000).slideUp()}$.extend({flash_action:function(g,d,f){d=d||2000;f=f||"";var c=$(".flash_message");c.html(g);c.clearQueue().addClass(f).slideDown().delay(d).slideUp();if(f){setTimeout(function(){c.removeClass(f)},d+1000)}}});$(document).on("submit",".modal .form form",function(j){var f=$(this);if((f.attr("data-ignore-form")=="true"&&f.hasClass("fkit_form"))||f[0].fkit_errors){return false}var c=f.data("validation");if(c&&typeof window[c]==="function"){if(!window[c]()){return false}}f.css({position:"relative"});var d=$('<div id="temp_cover_ajax"><img src="'+cdn_url+'images/ajax-loader.gif" style="position:absolute; top:50%; left:50%;" /></div>');f.parents(".form").append(d);if(f.attr("data-ignore-form")!="true"){j.preventDefault();var h=$(this).attr("action");var k=function(){};var l=$(".modal .form").data("callback");if(l&&typeof window[l]==="function"){k=window[l]}if(!fc.disableForm(f)){$("#temp_cover_ajax").remove();return false}var g={};if(typeof f[0].processErrors==="function"){g.onError=f[0].processErrors}g["$form"]=f;ajaxRequest(h,f.serializeFormJSON(),k,g);return false}});$(document).on("submit",".flash_message form",function(g){var d=$(this);d.css({position:"relative"});var c=$('<div id="temp_cover_ajax"><img src="'+cdn_url+'images/ajax-loader.gif" style="position:absolute; top:50%; left:50%;" /></div>');d.append(c);g.preventDefault();d.find("input[type=submit]").prop("disabled",true);var f=$(this).attr("action");var h=function(){$(".flash_message").slideUp();if($(".modal .form form").length){$(".modal .form form").submit()}else{a(session_restored_str)}};ajaxRequest(f,d.serializeFormJSON(),h);return false});$(document).on("click",".close_box, .close_it_link",function(c){hide_msg_popup($(this).parents(".user_msg_box").attr("id"))});init_search_input();if(typeof intercomSettings!=="undefined"){init_intercom()}$("ul.fc-projects li, ul.fc_group li").hover(function(){var f=$(this).find(".fc-applications");var c=$(this).offset();if(typeof c!=="object"||c===null){return}else{var g=f.outerHeight();var d=$(window).height();var h=c.top-$(window).scrollTop();if(h+g>d){var j=d-(h+g)-5;f.css("top",parseInt(j)+"px")}else{f.css("top","-1px")}}},function(){});$(document).mouseup(function(c){if(fc.outer_click_type){fc.handleOuterClick(c)}});$(".timer_action.global_action").click(function(){fc.logEvent("timer_global_action","clicked")});$(".download_btn_small.inactive").click(function(){fc.logEvent("folder_download","inactive")});handleAppDDForSmallScreen();setTimeout(fc.jqueryMigrationCheck,500);$(document).on("click",".add_entry_btn",function(c){c.preventDefault();$(".no_entries_inner").addClass("animateOut");setTimeout(function(){$(".entry_3").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(".no_entries_inner").removeClass("animateOut")});$(".add_entry_btn_real").click()},400)});$(document).on("click",".tags_btn",function(f){var d=$(this).parents(".fkit_tags_panel, .ci, .fkit_form");if(!d.length&&fkit.al_f_loaded&&$(this).parents(".al_container").length){d=$(".al_container").find(".fkit_tags_panel")}if(!d.length){return false}var c=".fkit_tags_content";var g=d.find(c);g.find(".fc_empty_placeholder").remove();g.removeClass("hide fkit_ignore").find(".fkit_tags").removeClass("hide");d.find(".tags_group").removeClass("hide");fkit.initiatePlugins(c);g.children("input.fkit_tags")[0].selectize.focus();if(!$(this).parents(".comments_list, .item-bar").length){$(this).remove()}return false});$(document).on("click",".selectize-input .item",function(f){if(!f.ctrlKey&&!f.metaKey){return true}var g=$(this).data("value");var c=base_url+"/manage/account?search_tags_ids[]="+g+"#manage_tags";var d=window.open(c,"_blank");if(d){d.focus();return false}return true});$(document).on("click",".f_in_public_project .tag_small",function(c){return false});$(document).on("click",".save_filters_in_url",function(c){fcif.copyUrlWithFilters()})});function scrollTopOfPage(a){if(a==="open"){$("html, body").animate({scrollTop:0},700)}else{setTimeout(function(){$(".quick_add_widget .quick_add_project").removeClass("hide")},100)}}function pad(b,a){var c=""+b;while(c.length<a){c="0"+c}return c}$(document).ajaxStart(function(){fc.ajax(true)});$(document).ajaxComplete(function(a,b){fc.ajax(false);if(b.status==399){if(fkit.modal_lock){fkit.modal_lock=false;fkit.modal_opened.fkit_modal_close()}fc.showRestoreSession()}});function start_timers(){for(var a=0;a<time_running_ids.length;a++){w_start(time_running_ids[a])}}function w_start(a){window["w_timer_"+a]=setInterval(function(){var l=$("#time_widget_display_"+a);var m=l.children(".t_w_h"),h=l.children(".t_w_m"),d=l.children(".t_w_s");var j=parseInt(m.html(),10);var c=parseInt(h.html(),10);var k=parseInt(d.html(),10);if(k==59){k=0;c++}else{k++}if(c==59){c=0;j++}var g=pad(k,2);var b=pad(c,2);var f=pad(j,2);d.html(g);h.html(b);m.html(f)},1000);if(!$("#time_widget_control_"+a).parents(".time_widget_item").hasClass("hide")){time_ids.push(a)}if(typeof start_minutes==="function"){start_minutes(a)}}function w_stop(f){var d=$("#time_widget_display_"+f);var a=d.children(".t_w_h");var c=d.children(".t_w_m");var g=d.children(".t_w_s");g.html("00");c.html("00");a.html("00");var b="w_timer_"+f;if(typeof window[b]!=="undefined"){clearInterval(window[b])}if(!$("#time_widget_control_"+f).parents(".time_widget_item").hasClass("hide")){time_ids.splice($.inArray(f,time_ids),1)}if(typeof stop_minutes==="function"){stop_minutes(f)}}function init_intercom(){var a=function(){a.c(arguments)};a.q=[];a.c=function(c){a.q.push(c)};window.Intercom=a;function b(){var d=document.createElement("script");d.type="text/javascript";d.async=true;d.src="https://api.intercom.io/api/js/library.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(d,c)}if(window.attachEvent){window.attachEvent("onload",b)}else{window.addEventListener("load",b,false)}}function init_search_input(){$(document).on("click",".fc_search_activate",function(a){a.preventDefault();if($("#global_search_container").hasClass("al_container_left_open")){fc.closeGlobalSearch();return}fc.openGlobalSearch()})}function handleAppDDForSmallScreen(){$("#applications li a").click(function(a){if($(window).width()>=768){return true}var b=$("#applications");if($(this).parents("li").hasClass("active")){b.toggleClass("small_screen_shown");a.preventDefault()}})}function deleteAttachedFile(d){var c=d.parents(".file_dialog_list_wrap");var b=c.data("fversion-id");var a=c.data("groupfile");ajaxRequest(url_to_current_unique+"/files/delete/",{ids:[b],is_group_file:a,f_ajax_load:fkit.al_f_loaded?1:0},function(){if(fkit.al_f_loaded){fkit.al_reload()}})}function quick_add_open_popup_app(f,d){var b;if(f=="crm"){b=d.data("href")}else{b=$(".quick_add_widget").find(".fc-selector").data("project-url")+"/"+f+"/add"}var a=fc.app_data[f];a.href=b;if("calendar"==f&&typeof view_type!=="undefined"){a.href+="/"+view_type}a.callback="on_quick_add";a.ajaxdata={quick_add:true};fkit.closeAllFkitDropdowns();set_date_for_calendar();var c=fkit.initiateModal({},$("<div/>"),a);c.fkit_modal_open(c)}function quick_add_open_popup(a){var b=a.data("unique-name");if(!b){fc.registerError("Probably wrong project selected in the quick add widget","",true,"error");return false}if(!popup_open){quick_add_open_popup_app(b,a)}}!function(d,c){"function"==typeof define&&define.amd?define(c):"object"==typeof exports?module.exports=c():d.ResizeSensor=c()}(this,function(){function d(j,h){var n=Object.prototype.toString.call(j),m="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&j instanceof jQuery||"undefined"!=typeof Elements&&j instanceof Elements,l=0,k=j.length;if(m){for(;l<k;l++){h(j[l])}}else{h(j)}}if("undefined"==typeof window){return null}var f=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(b){return window.setTimeout(b,20)},g=function(k,j){function c(){var l=[];this.add=function(n){l.push(n)};var h,m;this.call=function(){for(h=0,m=l.length;h<m;h++){l[h].call()}},this.remove=function(o){var n=[];for(h=0,m=l.length;h<m;h++){l[h]!==o&&n.push(l[h])}l=n},this.length=function(){return l.length}}function b(l,h){return l.currentStyle?l.currentStyle[h]:window.getComputedStyle?window.getComputedStyle(l,null).getPropertyValue(h):l.style[h]}function a(I,H){if(I){if(I.resizedAttached){return void I.resizedAttached.add(H)}I.resizedAttached=new c,I.resizedAttached.add(H),I.resizeSensor=document.createElement("div"),I.resizeSensor.className="resize-sensor";var G="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",F="position: absolute; left: 0; top: 0; transition: 0s;";I.resizeSensor.style.cssText=G,I.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+G+'"><div style="'+F+'"></div></div><div class="resize-sensor-shrink" style="'+G+'"><div style="'+F+' width: 200%; height: 200%"></div></div>',I.appendChild(I.resizeSensor),"static"==b(I,"position")&&(I.style.position="relative");var B,A,z,y,E=I.resizeSensor.childNodes[0],D=E.childNodes[0],C=I.resizeSensor.childNodes[1],x=I.offsetWidth,w=I.offsetHeight,v=function(){D.style.width="100000px",D.style.height="100000px",E.scrollLeft=100000,E.scrollTop=100000,C.scrollLeft=100000,C.scrollTop=100000};v();var u=function(){A=0,B&&(x=z,w=y,I.resizedAttached&&I.resizedAttached.call())},K=function(){z=I.offsetWidth,y=I.offsetHeight,B=z!=x||y!=w,B&&!A&&(A=f(u)),v()},J=function(l,h,m){l.attachEvent?l.attachEvent("on"+h,m):l.addEventListener(h,m)};J(E,"scroll",K),J(C,"scroll",K)}}d(k,function(h){a(h,j)}),this.detach=function(h){g.detach(k,h)}};return g.detach=function(b,h){d(b,function(c){c&&(c.resizedAttached&&"function"==typeof h&&(c.resizedAttached.remove(h),c.resizedAttached.length())||c.resizeSensor&&(c.contains(c.resizeSensor)&&c.removeChild(c.resizeSensor),delete c.resizeSensor,delete c.resizedAttached))})},g});if(typeof fkit==="undefined"){var fkit={}}else{alert("You've overridden the fkit shortcut fkit, please fix your code asap!")}fkit.modal_opened=false;fkit.modal_lock=false;fkit.modal_temp_lock=true;fkit.modal_temp_lock_timeout=null;fkit.modal_height=0;fkit.esc_handlers=[];fkit.preloading_boxes=$('<div class="preloading_boxes"><div class="bx box__1"></div><div class="bx box__2"></div><div class="bx box__3"></div><div class="bx box__4"></div><div class="bx box__5"></div><div class="bx box__6"></div><div class="bx box__7"></div><div class="bx box__8"></div><div class="bx box__9"></div><div class="bx box__10"></div><div class="bx box__11"></div><div class="bx box__12"></div><div class="bx box__13"></div></div>');if(typeof yes_str==="undefined"){var yes_str="Yes"}if(typeof no_str==="undefined"){var no_str="No"}if(typeof $.ui!=="undefined"){$.ui.position.schedulePosition={left:function(a,c){if(a.left>0){a.left=a.left-50}var b=a.left;$.ui.position.flip.left(a,c);if(a.left<0){a.left=5}if(b!=a.left){c.elem.addClass("flippedLeft")}else{c.elem.removeClass("flippedLeft")}},top:function(a,c){var b=a.top;$.ui.position.flip.top(a,c);if(b!=a.top){c.elem.addClass("flippedTop")}else{c.elem.removeClass("flippedTop")}}};$.ui.position.custom={left:function(b,f){var c=b.left;var d=false;if(f.elem.hasClass("dropdown-delete")){var a=$(window).width()-f.elemWidth-5;if(c>a){c=b.left=a;d=true}}$.ui.position.flip.left(b,f);if(c!=b.left){f.elem.addClass("flippedLeft")}else{f.elem.removeClass("flippedLeft")}if(d){f.elem.addClass("movedDdDelete")}else{f.elem.removeClass("movedDdDelete")}},top:function(a,c){var b=a.top;$.ui.position.flip.top(a,c);if(b!=a.top){c.elem.addClass("flippedTop")}else{c.elem.removeClass("flippedTop")}}}}fkit.fkit_delete_dialog=$('<div class="dropdown-delete"><div class="header">Are you sure you?</div><div class="body"><div class="message">You are about to delete an item</div><div class="confirm"><a class="yes btn btn-positive btn-s">'+yes_str+'</a> <a class="no btn btn-s">'+no_str+"</a></div></div>");fkit.$error_message=$('<div class="field_message"/>');fkit.initiatePlugins=function(a){var a=(a?a+" ":"");if($("field .error_message").length){$("field .error_message").parents(".group").addClass("error")}$(a+" .fkit_tip:not(.tooltipstered)").each(function(){var b=this;b.$th=$(this);if(!fc.isMobileVersion){b.$th.tooltipster({functionInit:function(c,g){var f=$(g.origin),h=f.data("tip-options");var d={theme:"tooltipster-borderless",side:"bottom",restoration:"previous"};if(typeof h!=="undefined"){$.extend(d,h)}$.each(d,function(j,k){c.option(j,k)});b.instance=c}})}});$(a+" .fkit_date:not(.dateinitiated):not([disabled]):not(.fkit_ignore)").each(function(){var d=this;d.$th=$(this);d.options={};d.dataOptions=d.$th.data("dateOptions");d.icon=d.$th.data("date-icon");d.time=d.$th.data("date-time");d["static"]=!!d.$th.data("date-static");if(d.icon){d.$th.parents("field").on("click",".field_icon",function(){setTimeout(function(){d.picker.open()},80)})}Flatpickr.l10ns["default"].firstDayOfWeek=week_first_day;d.defaultOptions={altInput:true,altFormat:"M j, Y",dateFormat:"Y-m-d",allowInput:true,altInputClass:"dateinitiated","static":d["static"]};d.time_options={enableTime:true,altFormat:d.defaultOptions.altFormat+" h:i K",dateFormat:d.defaultOptions.dateFormat+" H:i:S"};d.time=d.time?d.time_options:{};d.options.onChange=function(g,j){d.$th.trigger("fkitDateChange",[g,j]);if(typeof d.$th.data("date-select-past")!=="undefined"){var h=new Date(Date.parse(g));var f=new Date();f.setHours(0,0,0,0);if(h<f){if(typeof past_date_str!=="undefined"){alert(past_date_str)}}}};d.options.onValueUpdate=function(f,g){d.$th.trigger("fkitDateValueChange",[f,g])};d.options.onOpen=function(f,g){d.$th.trigger("fkitDateOpen",[f,g])};d.options.onClose=function(f,g){if(typeof d.$th.data("date-empty")!=="undefined"){if(!d.$th.parents(".group").find(".fkit_date[type='text']").val().length){d.$th.parents(".group").find(".fkit_date[type='hidden']").val("")}}d.$th.trigger("fkitDateClose",[f,g])};if(typeof d.$th.data("date-disable-past")!=="undefined"){d.options.minDate=new Date()}if(typeof d.$th.data("date-disable-future")!=="undefined"){d.options.maxDate=new Date()}if(typeof d.$th.data("date-default-tomorrow")!=="undefined"){var b=new Date();b.setDate(b.getDate()+1);d.options.defaultDate=b}if(typeof d.$th.data("date-default-today")!=="undefined"){var c=new Date();c.setHours(0,0,0,0);d.options.defaultDate=c}d.toggleTime=function(h){d.picker.destroy();var g=h?d.time_options:{};var f={};$.extend(f,d.options,d.defaultOptions,d.dataOptions,g);d.picker=d.$th.flatpickr(f)};d.clearPicker=function(){d.picker.close();d.picker.clear()};d.final_options={};if(fc.user_lang_code_dp){d.final_options.locale=fc.user_lang_code_dp}$.extend(d.final_options,d.options,d.defaultOptions,d.dataOptions,d.time);d.picker=d.$th.flatpickr(d.final_options);if(d.$th.val()===d.$th.attr("placeholder")){d.$th.val("")}d.$th.addClass("dateinitiated");d.$th.trigger("datepickerLoaded")});$(a+" .fkit_color:not(.colorinitiated)").each(function(){var b=$(this);if(b.data("color-preview")){b.parents("field").find(".color_selected").css("backgroundColor","#"+(b.val()!==""?b.val():"ffffff"));b.parents("field").on("click",".color_preview",function(){b.ColorPickerShow()})}b.ColorPicker({onSubmit:function(c,g,d,f){$(f).val(g);$(f).ColorPickerHide()},onBeforeShow:function(){b.ColorPickerSetColor(this.value)},onChange:function(c,f,d){if(b.data("color-preview")){b.parents("field").find(".color_selected").css("backgroundColor","#"+f)}b.val(f);b.trigger("change")}}).on("keyup change",function(){b.ColorPickerSetColor(this.value);if(b.data("color-preview")){b.parents("field").find(".color_selected").css("backgroundColor","#"+this.value)}}).addClass("colorinitiated")});$(a+" .fkit_time:not(.timeinitiated)").each(function(){var c=$(this);var b=c.data("time-icon");if(b){c.parents("field").on("click",".field_icon",function(){c.focus()})}c.timeEntry().addClass("timeinitiated")});$(a+" .fkit_editor:not(.editorinitiated):not(.fkit_ignore)").each(function(){var b=this;b.$th=$(this);if(!b.$th.attr("id")){b.$th.attr("id",fkit.guidGenerator())}b.editorType=b.$th.data("editorType");b.additionalOptions=b.$th.data("editorOptions");b.options={};var c=ckeditor_standard_options;if(b.editorType==="advanced"){c=ckeditor_advanced_options}b.options=jQuery.extend({},c);if(fc.f_rtl){$.extend(b.options,{contentsLangDirection:"rtl"})}if(b.additionalOptions){$.extend(b.options,b.additionalOptions)}if(fc.isMobileVersion){b.options.width="100%"}fc.initCustomizeEditorLink();b.$th.ckeditor(function(){b.$th.trigger("editorloaded");b.instance=CKEDITOR.instances[b.$th.attr("id")];b.instance.on("change",function(){b.$th.trigger("editorchanged")});fc.improveCKEditor(b.$th,b.options.f_no_attach)},b.options);b.$th.addClass("editorinitiated")});$(a+" .fkit_multi_select:not(.multiselectinitiated)").each(function(){var f=$(this);if(f.parents(".fkit_ignore").length){return true}var g=f.data("multi-none-text");var j=f.data("multi-filter-text");var h=(g?g:"Choose Users");var b=(j?j:"Enter Name");var d=(f.data("multi-options")?f.data("multi-options"):{});var c={noneSelectedText:h,position:{at:"left bottom",my:"left top"},menuWidth:null};$.extend(c,d);c.minWidth=f.width()-12;f.multiselect(c).multiselectfilter({placeholder:b});f.addClass("multiselectinitiated")});$(a+" .fkit_tags:not(.tagsinitiated)").each(function(){var c=this;c.$th=$(this);var h=$(this);if(c.$th.parents(".fkit_ignore").length){return true}if($(this).hasClass("tagsinitiated")){return}c.$th.addClass("tagsinitiated");var g=c.$th.data("appid");var f=c.$th.data("itemid")?c.$th.data("itemid"):0;var b=g+"_"+f;var j=[];if(fc.all_tags){if(Object.values){j=Object.values(fc.all_tags)}else{j=Object.keys(fc.all_tags).map(function(l){return fc.all_tags[l]})}}var k=(fc.tags_by_items&&fc.tags_by_items[b])?fc.tags_by_items[b]:[];var d={plugins:["remove_button"],options:j,items:k,persist:false,valueField:"id",labelField:"title",searchField:["id","title"],createOnBlur:true,closeAfterSelect:true,onInitialize:function(l){c.instance=l},create:function(l){return{id:"new_"+l,title:l}},onChange:function(l){},onBlur:function(){fkit.on_tags_change(h)}};c.$th.selectize(d);h.data("curr_tags",JSON.stringify(h[0].selectize.items));return c});fkit.on_tags_change=function(h){var g=h.data("itemid");if(!g){return}if(h.data("fnoinstant")){return}var f=h.next(".fkit_tags");var d=h[0].selectize;var c=h.data("appid");var b=d.items;var j=JSON.stringify(b);if(h.data("curr_tags")===j){return}fkit.save_tags(c,g,b,f);h.data("curr_tags",j)};fkit.save_tags=function(d,c,b,f){fc.blink(f);var g=url_to_project_unique_name;if(fkit.al_f_loaded&&f.parents(".al_container").length){g=fkit.al_url_to_project_unique}else{if(fc.f_group_context){g=g+"app"}}ajaxRequest(g+"/tags/update",{app_id:d,item_id:c,tags:b},function(j){fc.blink(f,true);if(!b.length){var h=d+"_"+c;fc.tags_by_items[h]=[]}});return false};$(a+" .fkit_create_new:not(.createnewinitated)").each(function(){var b=this;b.$th=$(this);b.$th.on("click",function(j){j.preventDefault();var d=$(this)[0];var f=d.$th.data("createFields");var h=d.$th.parents(".group");var c="";for(var g=0;g<f.length;g++){var k=(f[g].placeholder?f[g].placeholder:"");c+='<div class="group"><label for="'+f[g].name+'">'+f[g].label+'</label><field><input type="text" id="'+f[g].name+'" name="'+f[g].name+'" placeholder="'+k+'"></field></div>'}h.after($(c));h.hide();d.$th.trigger("fkitCreatedNew");h.remove()});if(!b.$th.parents(".group").find("select").html().trim().length){b.$th.click()}b.$th.addClass("createnewinitated")});$(a+" .fkit_dropdown:not(.dropdowninitiated)").each(function(c){var b=this;if($(this).parents(".fkit_ignore").length){return b}b=fkit.initiateDropdown(b,$(this),false);return b});$(a+" .fkit_form:not(.forminitiated):not(.fkit_ignore)").each(function(c){var b=this;b=fkit.initiateForm(b,$(this),false);return b});$(a+" .fkit_scroll:not(.scrollinitiated)").each(function(){var b=this;b.$th=$(this);if(!(b.$th.data("firefoxOnly")&&navigator.userAgent.indexOf("Firefox")>0)){b.$th.addClass("scrollinitiated");return false}b.options={};b.dataOptions=b.$th.data("options");b.defaultOptions={wheelSpeed:5,wheelPropagation:true,minScrollbarLength:20,handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"]};$.extend(b.options,b.defaultOptions,b.dataOptions);b.scroller=b.$th.perfectScrollbar(b.options);b.$th.addClass("scrollinitiated")});$(a+" .fkit_loading:not(.loadinginitiated)").each(function(c){var b=this;b.$th=$(this);b.default_settings={type:"list_items"};b.new_settings=b.$th.data();b.settings=$.extend({},b.default_settings,b.new_settings);b.$content=$('<div class="skeleton-screen"><div class="skeleton-item item-1"></div><div class="skeleton-item item-2"></div><div class="skeleton-item item-3"></div></div>');b.animate_in=function(d,f){d.addClass("animate-in");setTimeout(function(){d.removeClass("animate-in").addClass("animated");if(f){setTimeout(function(){f(b.$th.find(".item-2"))},300)}},350)};if(b.settings.type==="list_items"){b.$th.append(b.$content);b.animate_in(b.$th.find(".item-1"),b.animate_in);setTimeout(function(){b.animate_in(b.$th.find(".item-3"))},800)}b.$th.addClass("loadinginitiated");return b});$(a+" .fkit_delete:not(.deleteinitiated)").each(function(c){var b=this;b.$th=$(this);b.default_settings={message:"You are about to delete an item.","delete-callback":function(){},"number-items":1};b.new_settings=b.$th.data();b.settings=$.extend({},b.default_settings,b.new_settings);b.$th.addClass("deleteinitiated");return b})};fkit.resetInitiadedFlags=function(a){$(a).find('[class*="initiated"]').addBack().each(function(){var b=this.className.match(/\w*initiated(\b|$)/);if(b){$(this).removeClass(b[0])}})};fkit.destroyPlugins=function(b,a){b=b||"";a=a||"";$(b+" .fkit_tip.tooltipstered"+a).each(function(){$(this).tooltipster("destroy")})};if(fc.f_init_ajax_load){fkit.al_f_loading=false;fkit.al_f_loaded=false;fkit.al_next_href_to_load="";fkit.al_initial_path=window.location.pathname;fkit.al_initial_title=$("head title").text();fkit.al_loaded_id=null;fkit.al_div=$(".al_container");fkit.al_editor_load_start_date=null;fkit.al_deferred_ajax_timeout=null;fkit.al_f_editor_handler_set=false;fkit.al_url_to_project_unique="";fkit.al_f_history_handling_suppressed=false;$(function(){fkit.al_init_history()})}$(function(){fkit.bind_handlers()});fkit.bind_handlers=function(){$(document).on("click",".load_page_via_ajax, .td_description",function(c){if(fc.isIpad){return}if(c.metaKey||c.ctrlKey||$(c.target).parents(".buttons_div").length){return}var b=$(c.target);if(b.hasClass("al_supress")||b.parent(".al_supress").length){return}c.preventDefault();var a=$(this);if(a.is(".td_description")){on_title_click(a);return}if(fc.f_init_ajax_load){fkit.al_on_ajax_link_click(a,a.attr("href"));c.stopPropagation()}else{window.location=$(this).attr("href")}});if(fc.f_init_ajax_load){$(document).on("dblclick",".load_page_via_ajax",function(a){a.preventDefault()});$(document).on("click",".loaded_view_close",function(a){a.preventDefault();fkit.al_close_confirm()});$(document).on("click",".loaded_view_reload",function(){if(fkit.al_show_close_confirm()){fkit.al_reload()}return false})}};fkit.al_close_confirm=function(a){if(!a&&!fkit.al_show_close_confirm()){return false}History.pushState({},fkit.al_initial_title,"/"+fkit.al_initial_path);return true};fkit.al_init_history=function(){crossroads.addRoute("/{group_unique}/{project_unique}/{app_unique}/archived",fkit.al_on_not_task_url_event);crossroads.addRoute("/{group_unique}/{project_unique}/{app_unique}",fkit.al_on_not_task_url_event);crossroads.addRoute("/{group_unique}/{project_unique}/{app_unique}/weekly",fkit.al_on_not_task_url_event);crossroads.addRoute("/{group_unique}/{project_unique}/{app_unique}/monthly",fkit.al_on_not_task_url_event);crossroads.addRoute("/{group_unique}/{project_unique}/{app_unique}/{id}",fkit.al_on_task_url_event);crossroads.addRoute("/{group_unique}/{project_unique}/{app_unique}/{id}/{date}",fkit.al_on_task_url_event);crossroads.addRoute("/dashboard/tasks",fkit.al_close);crossroads.addRoute("/dashboard/calendar",fkit.al_close);crossroads.addRoute("/dashboard/home",fkit.al_close);History.Adapter.bind(window,"statechange",function(){var a=History.getState();crossroads.parse(document.location.pathname+document.location.search)})};fkit.al_on_task_url_event=function(d,a,f,h,c){var g="";if(typeof c!=="undefined"){g="/"+c}var b="/"+d+"/"+a+"/"+f+"/"+h+g;if(fkit.al_f_loading){fkit.al_next_href_to_load=b}else{fkit.al_url_to_project_unique=base_url+d+"/"+a;fkit.al_load_page(b);$(".al_opened").removeClass("al_opened");if(f==="todos"){$("#todo_"+h).addClass("al_opened")}}};fkit.al_on_not_task_url_event=function(){if(fkit.al_f_history_handling_suppressed){return}fkit.al_close()};fkit.al_on_ajax_link_click=function(b,a){if(fkit.al_f_loaded&&a===location.href){fkit.al_close_confirm();return}if(fkit.al_f_loading){fkit.al_next_href_to_load=b.attr("href")}else{if(a!==location.href){if(fkit.al_show_close_confirm()){History.pushState({},"Loading item...",a)}}}};fkit.al_reload=function(){fc.ajax(true);fkit.al_hide_div_content();fkit.al_append_spinner();fkit.al_load_url(fkit.current_view_page)};fkit.al_load_page=function(b){fc.ajax(true);fkit.al_f_loading=true;fkit.current_view_page=b;if(fkit.al_f_loaded){var a=500;fkit.al_div.removeClass("al_animate_left");setTimeout(function(){fkit.al_slide_and_load(b)},a);return}fkit.al_f_loaded=true;if(!$("body").hasClass("fc_side_minimized_hide")){fc.sideBarCollapse(true)}fkit.al_bind_reload_handler();fkit.al_slide_and_load(b)};fkit.al_append_spinner=function(){fkit.al_div.append('<div class="spinner-xl"></div>')};fkit.al_slide_and_load=function(a){fkit.al_hide_div_content();fkit.al_append_spinner();fkit.al_div.addClass("al_animate_left");fkit.al_load_url(a)};fkit.al_load_url=function(a){var b={};if(typeof al_app_params==="function"){b=al_app_params()}ajaxRequest(a,{f_ajax_load:1,app_params:b},fkit.al_on_load_url_response,{type:"GET",onError:fkit.al_on_load_error})};fkit.al_on_load_error=function(a){if(a.message){$.flash_action(a.message,5000)}fkit.al_f_loading=false;fkit.al_close()};fkit.al_should_wait_ckeditor=function(){var a=4000;var b=a;if(fkit.al_editor_load_start_date){b=new Date()-fkit.al_editor_load_start_date}return b<a};fkit.al_init_editor_load_handler=function(){if(!fkit.al_f_editor_handler_set){fkit.al_f_editor_handler_set=true;CKEDITOR.on("instanceReady",function(a){fkit.al_editor_load_start_date=null;a.editor.on("change",function(){if(!fkit.al_f_loaded){return}if($(".al_view_header").position().top!==0){fkit.al_fix_top_buttons()}})})}};fkit.al_on_load_url_response=function(b){var c=200;if(fkit.al_should_wait_ckeditor()){clearTimeout(fkit.al_deferred_ajax_timeout);fkit.al_deferred_ajax_timeout=setTimeout(function(){fkit.al_on_load_url_response(b)},c);return}fkit.al_init_editor_load_handler();$("title").text(b.data.title);document.title=b.data.title;fkit.al_loaded_id=b.data.id;var a=$(b.data.html);a.hide();fkit.al_div.find(".spinner-xl").remove();fkit.al_clean_div();fkit.al_div.append(a);fkit.al_on_subscribes_update();a.find(".timeago").timeago();a.find(".al_todo_title").click(function(){return fkit.al_close_confirm()});a.fadeIn("slow",function(){fkit.initiatePlugins();if(typeof b.data.unread_notific_count!=="undefined"){$("#unread_items_cnt").text(b.data.unread_notific_count);$("#unread_items_cnt").toggle(b.data.unread_notific_count!=0)}});fkit.al_f_loading=false;if(fkit.al_next_href_to_load){if(location.href!==fkit.al_next_href_to_load){History.pushState({},"Loading task...",fkit.al_next_href_to_load)}fkit.al_next_href_to_load=""}};fkit.al_close=function(){if(!fkit.al_f_loaded){return}fkit.al_f_loaded=false;fkit.al_unbind_reload_handler();fkit.al_div.removeClass("al_animate_left");if($("body").hasClass("fc_side_minimized_hide_temp")){fc.sideBarExpand(true)}$(".al_opened").removeClass("al_opened");fkit.al_clean_div_when_possible()};fkit.al_clean_div_when_possible=function(){var a=200;if(fkit.al_should_wait_ckeditor()){clearTimeout(fkit.al_deferred_ajax_timeout);fkit.al_deferred_ajax_timeout=setTimeout(function(){fkit.al_clean_div_when_possible()},a);return}fkit.al_clean_div()};fkit.al_show_close_confirm=function(){if(fc.needUnsavedAlert(true)){return confirm(unsaved_page_str)}return true};fkit.al_bind_reload_handler=function(){$(document).on("keydown.ajax_loaded_refresh",function(c){var a=116;var b=82;if(c.which===a||(c.which===b&&c.ctrlKey)){fkit.al_close_confirm()}})};fkit.al_unbind_reload_handler=function(){$(document).off("keydown.ajax_loaded_refresh")};fkit.al_on_subscribes_update=function(){fkit.al_div.find("#subscribed_counter").text($(".notification_subscriptions_wrap .notifications_checkbox:checked").length)};fkit.al_hide_div_content=function(){$("#sb-container").remove();fkit.al_div.find(".al_view_header, .content").hide()};fkit.al_clean_div=function(){$("#sb-container").remove();if(CKEDITOR.instances.add_comment_wysiwyg){CKEDITOR.instances.add_comment_wysiwyg.destroy()}fkit.al_div.html("")};fkit.al_suppress_history_handling=function(){if(!fkit.al_f_loaded){return}fkit.al_f_history_handling_suppressed=true;fc.al_stored_url=window.location.href};fkit.al_activate_history_handling=function(){if(!fkit.al_f_loaded||!fc.al_stored_url){return}window.location.href=fc.al_stored_url;fkit.al_f_history_handling_suppressed=false};fkit.al_fix_top_buttons=function(){fkit.al_div.scrollTop(0)};$(document).on("click",function(b){if(fkit.modal_opened){var c=$(b.target);if(!c.parents(".cke_button__maximize").length&&"HTML"!==c.prop("tagName")&&!c.parents(".footer").length){fkit.modal_close_by_cursor_position(b)}}if($(".fkit_dropdown.is_active").length){var a=$(".fkit_dropdown.is_active")[0];if(($(".fkit_dropdown.is_active").data("deleteMessage")&&(!$(b.target).is(a.$dropdown_button)&&!$(b.target).parents("."+a.$content.attr("class").split(" ").join(".")).length))||(!$(b.target).parents(".fkit_dropdown").length&&!$(".fkit_dropdown.is_active").data("deleteCallback")&&!$(b.target).hasClass("password_field"))){$(".fkit_dropdown.is_active")[0].fkit_dropdown_close()}}if($(".dropdown-delete").length&&$(".dropdown-delete").hasClass("is_active")){if(!$(b.target).parents(".dropdown-delete").length&&!$(b.target).is($(".dropdown-delete"))){$(".dropdown-delete")[0].self.$content.close_confirmation()}}if(typeof e!=="undefined"){if($(".al_container.al_animate_left").length&&!$(b.target).parents(".al_container").length&&$(e.target).parents(".k-scheduler-content").length){fkit.al_close()}}});fkit.register_esc_handler=function(a){fkit.esc_handlers.push(a)};collapseMaximizedEditor=function(){if(typeof CKEDITOR==="undefined"){return false}for(var a in CKEDITOR.instances){if(CKEDITOR.instances[a].getCommand("maximize").state==CKEDITOR.TRISTATE_ON){CKEDITOR.instances[a].execCommand("maximize");return true}}return false};$(document).keydown(function(b){if(b.keyCode!==27){return}if(collapseMaximizedEditor()){return}var c=fkit.al_f_loaded;if(fkit.modal_opened){fkit.modal_opened.fkit_modal_close();c=false}if($("#sb-container:visible").length){return}if(fkit.dropdown_module_used){fkit.closeAllFkitDropdowns()}if(c){fkit.al_close_confirm()}for(var a=0;a<fkit.esc_handlers.length;a++){fkit.esc_handlers[a]()}});fkit.body_overflow=function(){if(fc.isMobileVersion){return}var a=$("html").hasScrollBar().horizontal;if(a&&!$("body").hasClass("fc_side_minimized_hide")&&$(".action_bar_right").length&&!$("body").hasClass("fc_side_minimized")){fc.sideBarCollapse(true);setTimeout(function(){if(fkit.action_bar_visible){fkit.action_bar_min_width=$(".action_bar_right").offset().left+$(".action_bar_right").outerWidth();fkit.action_bar_resize()}},200);$(".body_width").css({"min-width":"500px"})}else{if($("body").width()>1200&&$("body").hasClass("fc_side_minimized_hide")){fc.sideBarExpand(true);$(".body_width").css({"min-width":"940px"})}}};fkit.action_bar_resize=function(){if(!fc.isMobileVersion){if(((fkit.action_bar_right.offset().left+fkit.action_bar_right.width())>window.innerWidth||fkit.action_bar_min_width>window.innerWidth)&&window.innerWidth>769){if(!$(".action_bar").hasClass("action_two_lines")){fkit.action_bar_min_width=$(".action_bar_right").offset().left+$(".action_bar_right").outerWidth()}if($("html").hasScrollBar().horizontal){$(".action_bar").addClass("action_two_lines")}}else{$(".action_bar").removeClass("action_two_lines")}}};$(function(){$(document).on("click",".fkit_modal:not(.modalinitiated), .load_popup:not(.modalinitiated)",function(b){b.preventDefault();if($(this).hasClass("btn-disabled")){return}var a=this;a=fkit.initiateModal(a,$(this),false);a.fkit_modal_open(a)});$(document).on("keydown",".dateinitiated[type='text']",function(b){if(b.keyCode===8||b.keyCode===46){var a=$(this).prev(".fkit_date[type='hidden']");if(a.length){a[0].clearPicker();return false}}});if(!fc.isMobileVersion){fkit.collapsable_sidebar=$(".fc_sidebar_collapse").length;fkit.original_body_collapsed=$("body").hasClass("fc_side_minimized_hide");if($(".action_bar_right").length){fkit.action_bar_visible=$(".action_bar .action_bar_left").length;if(fkit.action_bar_visible){fkit.action_bar_right=$(".action_bar_right")}if(fkit.action_bar_visible){fkit.action_bar_min_width=$(".action_bar_right").offset().left+$(".action_bar_right").outerWidth();fkit.action_bar_resize()}}if(fkit.collapsable_sidebar&&!fkit.original_body_collapsed){fkit.body_overflow()}$(window).on("resize",function(){if(fkit.action_bar_visible){fkit.action_bar_resize()}if(fkit.modal_opened&&$(".modal .form form").length){fkit.render_modal_bottom()}if(fkit.collapsable_sidebar&&!fkit.original_body_collapsed){fkit.body_overflow()}});$(".modal").on("modalopened",function(){new ResizeSensor(fkit.modal_opened.$modal_internal,function(){var a=$(".modal .form");if(!a.length){return}if(a.hasScrollBar().vertical){a.addClass("modal_scroll")}})});$(".modal").on("modalopened",function(){new ResizeSensor(fkit.modal_opened.$modal_internal,function(){var d=$(".modal .form");if(!d.length){return}if(d.hasScrollBar().vertical){var b=$(window).height()-(d.outerHeight()+d.offset().top);var c=d[0].scrollHeight;var a=c-fkit.modal_scroll_height;if(b>a){$(".modal .form,.form .footer").css("bottom",parseInt(d.css("bottom"))-a)}}if(d.hasScrollBar().vertical){d.addClass("modal_scroll")}fkit.modal_height=$(fkit.modal_opened.settings["height-selector"]).length?$(fkit.modal_opened.settings["height-selector"]).outerHeight():$(".form .replace_form").outerHeight();fkit.modal_scroll_height=d[0].scrollHeight;fkit.render_modal_bottom()})})}});fkit.helper={};fkit.helper.selectCopyText=function(f,a,j,g){j=(typeof j!=="undefined")?j:function(l){};g=(typeof g!=="undefined")?g:function(){alert("Please press Ctrl/Cmd+C to copy")};function b(m){if(m){try{document.execCommand("copy");j(m)}catch(l){g()}}}var c=$(f.target);if(c.is("input:text")){c[0].select();if(a){b(c.val())}return}var k=c[0];if(document.body.createTextRange){var d=document.body.createTextRange();d.moveToElementText(k);d.select()}else{if(window.getSelection){var h=window.getSelection();var d=document.createRange();d.selectNodeContents(k);h.removeAllRanges();h.addRange(d)}}if(a){b(h.toString())}};fkit.helper.alert=function(b){var a=this;a.settings={};a.default_options={content:"",template:"info",display_location:"top",footer:"",time_displayed:4000,close_store_local_storage:false};$.extend(a.settings,a.default_options,b);a.closeAlert=function(){a.$alert.fadeOut()};a.showAlert=function(){$("body").append(a.$alert);a.$alert.attr("style","position: fixed; top: 1rem; left: 50%; margin-left: -400px; width: 800px; z-index: 9999999;");a.$alert.fadeIn();if(a.settings.time_displayed){setTimeout(function(){a.closeAlert()},a.settings.time_displayed)}};if(typeof a.settings.content==="string"){a.$alert=$("<div class='alert hide'>");a.$alert.html("<div>"+a.settings.content+"</div>");a.$alert.attr("data-alert",a.settings.template)}else{a.$alert=a.settings.content;a.$alert.addClass("hide")}a.$alert.on("click",".close-alert",function(c){c.preventDefault();a.closeAlert()});a.showAlert()};fkit.guidGenerator=function(){var a=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return("fc_"+a()+a()+""+a())};fkit.helper.waitForElementToDisplay=function(a,c,b){b=b||1000;if($(a).length){c();return}else{setTimeout(function(){fkit.helper.waitForElementToDisplay(a,b)},b)}};fkit.dropdown_module_used=true;fkit.confirmationGeneratePopup=function(a,c,d,b){b=b||{};d=d||a.settings.deleteHeader;a.$th=a.$th||$(a);a.$content=fkit.fkit_delete_dialog.clone();a.$content[0].self=a;a.$content.find(".message").html(c);a.$content.find(".header").text(d);a.settings=$.extend(a.settings,{dropdownPositionContent:"center top+10",dropdownPositionParent:"center bottom"},b);a.$content.find(".yes").on("click",function(f){f.preventDefault();if(typeof a.settings.deleteCallback==="function"){fkit.modal_lock=false;a.settings.deleteCallback(a.$th)}else{if(typeof window[a.settings.deleteCallback]=="function"){window[a.settings.deleteCallback](a.$th)}else{if(a.$th.data("confirmtype")==="ajax"||a.$th.data("confirmtype")==="ajaxReload"||a.$th.data("confirmtype")==="ajaxPost"){ajaxRequest(a.settings.deleteCallback,"",function(g){a.$th.parents("li").slideUp("slow").remove();a.$content.close_confirmation();if(typeof window[a.settings.deleteSuccess]=="function"){window[a.settings.deleteSuccess](g)}},{type:a.$th.data("confirmtype")==="ajaxPost"?"POST":"GET"})}else{window.location=a.settings.deleteCallback}}}a.$content.close_confirmation()});a.$content.find(".no").on("click",function(f){f.preventDefault();a.$content.close_confirmation()});a.$content.appendTo("body");a.$content.show();a.$content.position({my:a.settings.dropdownPositionContent,at:a.settings.dropdownPositionParent,of:a.settings.dropdownOfSelector?$(a.settings.dropdownOfSelector):a.$th,collision:"custom"});setTimeout(function(){a.$content.addClass("is_active");a.$th.addClass(a.settings.dropdownOpenedClass)},100);a.$content.close_confirmation=function(){a.$th.removeClass(a.settings.dropdownOpenedClass);a.$content.fadeOut("slow",function(){a.$content.remove();a.$content=null;fkit.modal_lock=false})}};fkit.confirm=function(b,d,c,a){fkit.confirmationGeneratePopup(b,c,d,{deleteCallback:a})};fkit.confirmationAjaxGeneration=function(b){var d={};var c="";var a=b.$th;if(a.data("confirmtype")==="common"){c=url_to_current_unique+"/notifications/common_confirmation/archive"}else{if(a.data("confirmtype")==="delete"){c=url_to_current_unique+"/notifications/delete_item_confirmation/";d={item_id:a.data("item_id"),application_id:a.data("app_id"),project_id:a.data("proj_id"),sub_app_name:a.data("subapp_name")}}else{if(a.data("confirmtype")==="ajax"){var f=b.settings.deleteCallback.split("/");f.pop();f.push("delete_dialog");c=f.join("/")}else{if(a.data("confirmtype")!=="ajaxReload"&&a.data("confirmtype")!=="ajaxPost"){c=url_to_current_unique+"/notifications/common_confirmation/"+a.data("confirmtype")}}}}ajaxRequest(c,d,function(g){if(g.status=="success"){b.$th.data("item_id",g.data.item_id);fkit.confirmationGeneratePopup(b,g.data.html)}})};fkit.dropdownDefaultSettings={dropdownAction:"click",dropdownAnimationDuration:"300ms",animateIn:"fadeIn",animateOut:"fadeOut",dropdownButton:".fkit_dropdown_activate",dropdownContent:".fkit_dropdown_content",dropdownOpenDelay:250,dropdownOpenedClass:"is_active",dropdownAnimationClass:"animated",dropdownCloseDelay:250,dropdownCloseButton:".fkit_dropdown_close",dropdownPositionContent:"right top",dropdownPositionParent:"right bottom",dropdownCallback:null,dropdownScriptRender:false,dropdownOfSelector:"",deleteHeader:typeof delete_confirm_lang!=="undefined"?delete_confirm_lang:"Are you sure?",deleteMessage:typeof permanently_delete_item!=="undefined"?permanently_delete_item:"You are about to delete this item permanently.",deleteCallback:null,deleteItemsNumber:1};fkit.closeAllFkitDropdowns=function(){$(".fkit_dropdown.is_active").each(function(){this.fkit_dropdown_close(true)})};fkit.repositionDropdowns=function(){$(".fkit_dropdown.is_active").each(function(){this.fkit_dropdown_reposition(true)})};fkit.initiateDropdown=function(a,d,c){c=c||{};a.$th=d;a.dropdown_lock=false;a.new_settings=a.$th.data();a.settings=$.extend({},fkit.dropdownDefaultSettings,a.new_settings,c);if(!a.settings.deleteCallback){a.$content=a.$th.find(a.settings.dropdownContent);a.$content.css({"animation-duration":a.settings.dropdownAnimationDuration})}var b=a.$th.find(a.settings.dropdownButton);a.$dropdown_button=b.length?b:a.$th;if(fc.isMobileVersion){a.$th.addClass("ios_no_highlight")}a.fkit_dropdown_close=function(f){if(a.dropdown_lock){return}a.dropdown_lock=true;if(f){a.$content.hide();a.$th.removeClass(a.settings.dropdownOpenedClass);a.dropdown_lock=false;return}a.$content.addClass(a.settings.animateOut);setTimeout(function(){a.$content.hide().removeClass(a.settings.dropdownAnimationClass+" "+a.settings.animateOut);a.$th.removeClass(a.settings.dropdownOpenedClass);a.dropdown_lock=false},parseInt(a.settings.dropdownAnimationDuration));if(a.settings.dropdownCallback&&typeof window[a.settings.dropdownCallback]==="function"){window[a.settings.dropdownCallback]("close",a)}};a.fkit_dropdown_open=function(){if($(this).data("dropdownAction")!=="hover"){fkit.closeAllFkitDropdowns()}if(a.settings.dropdownScriptRender&&!a.scriptLoaded){a.scriptLoaded=true;a.$content.html($("#"+a.settings.dropdownScriptRender).html())}a.$th.addClass(a.settings.dropdownOpenedClass);if(a.settings.deleteCallback&&!$("body").find(a.$content).length){a.$content.appendTo("body")}a.$content.show();a.$content.position({my:a.settings.dropdownPositionContent,at:a.settings.dropdownPositionParent,of:a.$th,collision:"flipfit"}).addClass(a.settings.dropdownAnimationClass+" "+a.settings.animateIn);setTimeout(function(){a.$content.removeClass(a.settings.animateIn)},parseInt(a.settings.dropdownAnimationDuration));if(a.settings.dropdownCallback&&typeof window[a.settings.dropdownCallback]==="function"){window[a.settings.dropdownCallback]("open",a)}};a.fkit_dropdown_toggle_popup=function(){if(a.$th.hasClass(a.settings.dropdownOpenedClass)){a.fkit_dropdown_close()}else{a.fkit_dropdown_open()}};a.fkit_dropdown_reposition=function(){a.$content.position({my:a.settings.dropdownPositionContent,at:a.settings.dropdownPositionParent,of:a.$th,collision:"flipfit"})};if(a.settings.deleteCallback){a.$th.on("click",function(f){f.preventDefault();if(a.$th.hasClass("disabled")){return}if(a.$content){a.$content.close_confirmation()}else{if(a.$th.data("confirmtype")&&a.$th.data("confirmtype")!=="ajaxReload"&&a.$th.data("confirmtype")!=="ajaxPost"){fkit.confirmationAjaxGeneration(a)}else{fkit.confirmationGeneratePopup(a,a.settings.deleteMessage,a.settings.deleteHeader)}}})}else{if(a.settings.dropdownAction==="click"||fc.isMobileVersion){a.$dropdown_button.on("click",function(f){f.preventDefault();a.fkit_dropdown_toggle_popup()});a.$th.on("click",a.settings.dropdownCloseButton,function(f){f.preventDefault();a.fkit_dropdown_close()})}else{if(a.settings.dropdownAction==="hover"){a.timeoutId;a.timeinId;a.$th.on({mouseenter:function(){clearTimeout(a.timeoutId);if(!a.$th.hasClass(a.settings.dropdownOpenedClass)){a.timeinId=setTimeout(function(){a.fkit_dropdown_open(a.$th,a.$content)},a.settings.dropdownOpenDelay)}},mouseleave:function(){clearTimeout(a.timeinId);a.timeoutId=setTimeout(function(){a.fkit_dropdown_close(a.$th,a.$content)},a.settings.dropdownCloseDelay)}})}}}a.$th.addClass("dropdowninitiated");return a};fkit.initiateModal=function(a,c,b){a.optional_settings=b||{};a.$th=c;a.data=a.$th.data();a.default_settings={backdrop:".darken",window:".modal",content:".form","animation-time":"500","toggle-callback":false,"close-button":".cancel",width:false,href:false,"active-class":"is_active","height-selector":".form form","class":"","submit-type":"GET","addnew-norefresh":"","show-upsell":""};a.new_settings={};$.each(a.$th[0].attributes,function(f,d){if(this.specified&&d.name.indexOf("modal-")!==-1){a.new_settings[d.name.replace("modal-","")]=d.value}});a.settings=$.extend({},a.default_settings,a.new_settings,a.optional_settings,a.data);a.settings.href=a.data.fchref||a.settings.href;if(fc.isMobileVersion){a.$th.addClass("ios_no_highlight")}a.$modal=$(a.settings.window);a.$content=a.$modal.find(a.settings.content);a.$backdrop=$(a.settings.backdrop);a.fkit_modal_close=function(){if(fkit.modal_lock){return}clearTimeout(fkit.modal_temp_lock_timeout);fkit.modal_temp_lock=true;fkit.modal_lock=true;var g=fkit.modal_opened.$modal.find(".fkit_form");var d=g[0];if(typeof d!=="undefined"&&d.state==="filled"&&d.getAttribute("data-ignore-unsaved-changes")!="true"){var f=g.find(".cancel");f[0]["settings"]={deleteCallback:function(){d.state="ignored";fkit.modal_opened.fkit_modal_close();$(".dropdown-delete")[0].self.$content.close_confirmation()},deleteHeader:delete_confirm_lang};fkit.confirmationGeneratePopup(f[0],unsaved_popup_str);return}if(a.modal_reload_page){if(fkit.al_f_loaded){fkit.al_reload()}else{location.reload();return}}$("body").removeClass("show_modal");fkit.modal_opened.$modal.removeClass("pre_animation");fkit.modal_opened.$backdrop.css({"transition-delay":"0.3s"}).removeClass("pre_animation");fkit.modal_opened.$th.removeClass("btn-disabled is_active");fkit.modal_lock=true;setTimeout(function(){a.$modal.removeClass(a.settings["class"]);fkit.modal_opened.$modal.hide();fkit.modal_opened.$backdrop.hide().css({"transition-delay":"0s"});fkit.modal_opened.$content.html("");fkit.modal_opened.$modal.removeClass(fkit.modal_opened.settings["active-class"]);$(".modal .form, .form .footer").css({"margin-left":"-250px",width:"500px"});setTimeout(function(){fkit.modal_opened=false},100)},parseInt(fkit.modal_opened.settings["animation-time"]));$(".modal").trigger("modalclosed");if(fkit.modal_opened.settings["toggle-callback"]&&typeof window[fkit.modal_opened.settings["toggle-callback"]]==="function"){window[fkit.modal_opened.settings["toggle-callback"]]("close")}$.each(fkit.modal_opened.$modal.find(".fkit_editor"),function(h,j){if(typeof CKEDITOR.instances[$(j).attr("id")]!=="undefined"){CKEDITOR.instances[$(j).attr("id")].destroy()}});if($(".file_dialog_list_wrap").length){fc.hideFileDialog()}fkit.modal_lock=false};a.$modal[0].close_modal=a.fkit_modal_close;a.fkit_modal_open=function(d){if(fkit.modal_lock){return}fkit.modal_temp_lock=false;fkit.modal_temp_lock_timeout=setTimeout(function(){fkit.modal_temp_lock=true},2000);if(fkit.modal_opened){a.fkit_modal_close()}if(a.settings["class"]){a.$modal.addClass(a.settings["class"])}fkit.modal_lock=true;fkit.modal_opened=d;fkit.modal_opened.$th.addClass("btn-disabled is_active");if(a.settings.width){$(".modal .form").css({"margin-left":(-a.settings.width/2),width:a.settings.width})}a.$content.wrapInner("<div class='temp_ajax_loading'></div>");a.$content.find(".temp_ajax_loading").append(fkit.preloading_boxes.clone());fkit.closeAllFkitDropdowns();a.$backdrop.show();a.$modal.show();setTimeout(function(){a.$backdrop.addClass("pre_animation");a.$modal.addClass("pre_animation");$("body").addClass("show_modal")},150);a.$content.addClass("loading_content");a.$modal.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a.$content.removeClass("pre_animation");a.$modal.addClass("is_active")});fc.ajax(true);a.ajaxLoad();if(a.settings["toggle-callback"]&&typeof window[a.settings["toggle-callback"]]==="function"){window[a.settings["toggle-callback"]]("open")}};a.ajaxLoad=function(g){var d={};if(a.settings.ajaxdata){d=a.settings.ajaxdata}else{if(a.data.ajaxdata){d=a.data.ajaxdata}else{if(fc.getPageAjaxData){d=fc.getPageAjaxData()}}}var f="";if(a.settings["show-upsell"]&&typeof fc_upsells!=="undefined"&&!fc_upsells.has_seen(a.settings["show-upsell"])){f=fc_upsells.get_upsell_url(a.settings["show-upsell"])}else{f=a.settings.href}if(a.settings["show-upsell"]&&typeof fc_upsells==="undefined"){fc.registerError("UPSELL SCRIPT NOT INCLUDED! fc_upsells not defined, but requested to show an upsell! Falling back to original modal URL.")}ajaxRequest(f,{data:d},function(h){var l="";if(a.modal_reload){if($(".modal .fkit_editor").length){CKEDITOR.instances[$(".modal .fkit_editor").attr("id")].destroy()}l=$('<div class="replace_form">'+h.data.html+"</div>");l.find(".footer").replaceWith(a.$content.find(".footer"));a.$content.find(".replace_form").replaceWith(l);a.$content.find(".error_group .field_message, .error_field .field_message, fieldset > .field_message").remove();a.$content.find(".error").removeClass("error");a.$content.find(".error_field").removeClass("error_field");a.$content.find(".error_group").removeClass("error_group");$("[autofocus]").focus();fkit.modal_lock=false;a.modal_reload=false}else{l=$(h.data.html.trim()).data(a.data);var j=$('<div class="replace_form"/>');j.append(l).attr("style",l.attr("style")?l.attr("style"):" transform: translate3d(-9000px,0,0);");if(a.modal_full_reload){$(".modal .form").html(j)}else{$(".modal .form").append(j)}var k=l.find(".fkit_editor");if(k.length){a.loadForm(l)}else{a.loadForm(l)}}a.initCloseButton();if(typeof g!=="undefined"){g()}},{type:a.settings["submit-type"],onError:function(h){if(!empty(h.message)){if(!empty(h.data)){if(!empty(h.data.error_source)&&h.data.error_source=="marketplace"){fc.displayError({title:"",content:h.message,error_id:""},8000)}else{fc.displayError({title:typeof smth_wrong_detailed_str!=="undefined"?smth_wrong_detailed_str:"Something has gone wrong. Issue: ",content:smth_wrong_sorry_str,error:h.message,error_id:h.data.error_id},8000)}}else{fc.displayError({title:smth_wrong_str,content:h.message,error:"",error_id:""},8000)}}fkit.modal_lock=false;fkit.modal_opened.fkit_modal_close()}})};a.loadForm=function(d){$(".replace_form").addClass("animated_content");$(".temp_ajax_loading").fadeOut("fast",function(){$(this).remove()});if(a.settings.width){$(".form .footer").css({"margin-left":(-a.settings.width/2),width:a.settings.width})}$(".replace_form").attr("style","").addClass("animated_visible");a.$content.removeClass("loading_content");a.$modal_internal=$(a.settings["height-selector"]).length?$(a.settings["height-selector"]):$(".form .replace_form");fkit.modal_height=a.$modal_internal.outerHeight();if(!empty(a.data["class"])){$(".modal").addClass(a.data["class"])}fkit.render_modal_bottom();fkit.modal_scroll_height=$(".modal .form")[0].scrollHeight;$("[autofocus]").focus();if(a.callback||a.settings.callback){$(".modal .form").data("callback",a.callback||a.settings.callback)}else{$(".modal .form").removeData("callback");a.callback=null}if(typeof fc_tips!=="undefined"){fc_tips.create_not_created_tips().css("z-index",1000)}if(!$(".modal").hasClass("fkit_ignore")){fkit.initiatePlugins(".modal .form")}$(".modal").trigger("modalopened");fkit.modal_lock=false};a.$th.on("click",function(d){d.preventDefault();d.stopPropagation();if(!fkit.modal_opened&&!a.$th.hasClass("btn-disabled")){a.fkit_modal_open(this)}});a.initCloseButton=function(){a.$modal.find(a.settings["close-button"]).off("click");a.$modal.find(a.settings["close-button"]).click(function(d){d.preventDefault();a.fkit_modal_close()})};a.$th.addClass("modalinitiated");return a};fkit.render_modal_bottom=function(a){var d=$(window).height();var c=0;var b=0;if($(".form .footer").length){b=$(".form .footer").outerHeight()+50}else{if($(".modal_no_footer").length){b=32}else{b=85}}if(a){fkit.modal_height=a.outerHeight();c=(d>fkit.modal_height)?d-fkit.modal_height+b:"1rem"}else{c=(d>fkit.modal_height+b)?d-(fkit.modal_height+b):"1rem"}$(".form").toggleClass("modal_scroll",c==="1rem");$(".modal .form,.form .footer").css({bottom:c});if(isMSEdge()){fixFooterBottomOnMSEdge()}};function isInternetExplorer(){return(window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))}function isMSEdge(){return window.navigator.userAgent.indexOf("Edge")>=0}function fixFooterBottomOnMSEdge(){var b=$(".modal .form")[0].scrollHeight;var c=$(".replace_form").height()+parseInt($(".modal .form").css("padding-top"));var a=b-c;$(".form .footer").css({bottom:-a+"px"})}fkit.modal_close_by_cursor_position=function(f){if(!fkit.modal_temp_lock&&!isInternetExplorer()){if((typeof f.pageX==="undefined"||typeof f.pageY==="undefined")||(f.pageX===0&&f.pageY===0)){return}var b=fkit.modal_opened.$content.outerWidth();var c=fkit.modal_opened.$content.outerHeight();var a=fkit.modal_opened.$content.offset();var d={left:a.left,right:a.left+b,top:a.top,bottom:a.top+c};if(!((f.pageX>d.left&&f.pageX<d.right)&&(f.pageY<d.bottom&&f.pageY>d.top))&&!$(f.target).parents(".dropdown-delete").length&&!$(f.target).parents(".ui-multiselect-menu").length&&!$(f.target).parents(".flatpickr-calendar").length&&!$(f.target).parents(".fc_select").length){fkit.modal_opened.fkit_modal_close()}}};fkit.open_modal=function(a){var b=fkit.initiateModal({},$("<div/>"),a);b.fkit_modal_open(b)};fkit.form_set_filled=function(a){a.$th.on("change editorchanged","input, textarea, .fkit_editor",function(b){a.state="filled";a.$th.off("change editorchanged","input, textarea, .fkit_editor")})};fkit.initiateForm=function(a,c,b){a.$th=c;b=b||{};a.state="pre_initialization";a.default_settings={};a.settings=$.extend(a.default_settings,typeof a.$th.data()!=="undefined"?a.$th.data():{},b);a.clearErrors=function(){a.$th.find(".error_group .field_message, .error_field .field_message, fieldset > .field_message, .error .field_message, .body > .field_message").remove();a.$th.find(".error").removeClass("error");a.$th.find(".error_field").removeClass("error_field");a.$th.find(".error_group").removeClass("error_group")};a.clearError=function(f){var d=f.parents(".error_group").length?f.parents(".error_group"):f.parents(".error_field");if(d.length){d.find(".error").removeClass("error");d.removeClass("error")}};a.processErrors=function(g,f){var d=[];a.clearErrors();if(typeof g.data!=="undefined"){d=g.data.errors}else{d=g}if(g.status==="error"&&typeof g.message!=="undefined"&&g.message!==""){a.renderError(a.$th,g.message,true);if($(".form form").length&&$(".body").length){$(".form").scrollTo(".body",800,30)}else{$("body,html").scrollTo("form.fkit_form",1000,50)}}else{$.each(d,function(k,l){var j="";var h="";if(isNaN(k)){j=k;h=l}else{j=l.field;h=l.error_message}if(j!==""&&h!==""&&j!=="global_error"){var m=a.$th.find("#"+j);if(!m.length){m=a.$th.find("[name='"+j+"']")}if(!m.length){m=a.$th.find("."+j+"_error")}a.renderError(m,h)}else{if(h!==""){a.renderError(a.$th,h,true)}}});if(a.$th.find(".error_field").first().length){if($(".form form").length){$(".form").scrollTo(a.$th.find(".error_field").first(),800,70)}else{if(!f){$("body,html").scrollTo($(".error_field").first(),1000,50);if($(".error_field:first-of-type input").length){$(".error_field:first-of-type input:first").focus()}}}}}a.$th.trigger("formSubmitFinished")};a.renderError=function(k,d,g){if(!g){var h=(k.parents(".group").length)?k.parents(".group"):k.closest("div").addClass("error");if(k.hasClass("bubble_block")){h=k}if(k.length&&h.is(":visible")){var f=$.parseHTML(d);h.addClass("error_group");if(k.parents("field, .field, .bubble_block").length){var j=k.parents("field, .field, .bubble_block");j.addClass("error_field");if(j.find(".field_message").length){j.find(".field_message").html(f)}else{j.append(fkit.$error_message.clone().html(f))}}else{if(h.hasClass("bubble_block")){h.addClass("error_field");h.append(fkit.$error_message.clone().html(f))}else{k.after(fkit.$error_message.clone().html(f))}}k.addClass("error")}}else{if(k.find(".body").length){k.find(".body").prepend(fkit.$error_message.clone().html($.parseHTML(d)))}else{k.find("fieldset:first-of-type").prepend(fkit.$error_message.clone().html($.parseHTML(d)))}}};a.validateForm=function(){var f={};var d=false;a.$th.find("[data-validate]").each(function(g){var h=a.validateField($(this));if(h){$.extend(f,h);d=true}});return d?f:false};a.validateField=function(g){var j=g.val().trim();var d=g.data("validate");var h=(g.data("validation-message")?g.data("validation-message"):false);var f=(typeof g.attr("name")!=="undefined"?g.attr("name"):g.attr("id"));if(d.indexOf("required")!==-1&&!j.length){var k={};k[f]=h||"Required field.";return k}else{if(d.indexOf("email")!==-1&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(j)){var k={};k[f]=h||"Invalid email.";return k}}return false};a.handleFormSubmission=function(f){if(!a.settings.followAction){f.preventDefault()}a.clearErrors();var d=$(f.target)[0].validateForm();if(!$.isEmptyObject(d)){$(f.target)[0].processErrors(d);return false}return true};a.registerSubmission=function(){a.$th.one("submit",function(f){var d=$(this);if($(this).attr("data-ignore-form")){return}d[0].state="submitted";var g=$(this)[0].handleFormSubmission(f);d[0].fkit_errors=!g;return g})};a.registerSubmission();a.$th.on("formSubmitFinished",function(){$(this)[0].fkit_errors=false;a.registerSubmission()});fkit.form_set_filled(a);a.$th.on("reset",function(){a.state="reset";a.$th.trigger("reset_start");a.$th.find(".dateinitiated").each(function(){if(typeof $(this)[0].picker!=="undefined"){$(this)[0].picker.clear()}});a.$th.find(".editorinitiated").each(function(){if(typeof $(this)[0].instance!=="undefined"){$(this)[0].instance.setData("")}});a.$th.trigger("reset_end");a.state="initialized";fkit.form_set_filled(a)});a.$th.attr("novalidate","novalidate");a.$th.addClass("forminitiated");a.$th.trigger("formloaded");a.state="initialized";return a};fkit.initStartEndDateConstraints=function(f,d){var a=$(f);var c=$(d);var b=$.merge(a,c);b.on("fkitDateOpen",function(){var g=a.val()||null;var h=c.val()||null;c[0].picker.set("minDate",g);a[0].picker.set("maxDate",h)})};$(function(){fkit.helper.tester.tests={todos:{add_todo_modal:{page:"*",steps:[{select:".action_bar_right .fkit_modal",action:"click",time:600},{select:".form form input[type=submit]",action:"click",waitUntil:".form form"}]},manage_groups:{page:"*",steps:[{select:".dropdown-single .fkit_dropdown_activate",action:"click"},{select:".dropdown-list.animated li:first-child .load_popup",action:"click",time:300}]},manage_project_apps:{page:"*",steps:[{select:"#marketplace_add a",action:"click"}]}},dashboard:{picker:{page:"*",steps:[{select:".fc_toggle_project_picker",action:"click",time:600}]}},issue_tracker:{select_delete:{page:"*",steps:[{select:"#check_dropdown > a > .toggle",action:"click",time:600},{select:"#delete_selected",action:"click",time:100}]}},files:{upload_file:{page:"*",steps:[{select:".action_bar_right .btn:contains('Upload')",action:"click"},{select:".form form input[type=submit]",action:"click",waitUntil:".form form"}]}},milestones:{add_milestone:{page:"*",steps:[{select:".action_bar_right .btn:contains('Add Milestone')",action:"click",waitUntil:".action_bar_right .btn.modalinitiated:contains('Add Milestone')"},{select:".form form input[type=submit]",action:"click",waitUntil:".form form"}]}},passwords:{add_password:{page:"*",steps:[{select:".action_bar_right .btn:contains('Add Password')",action:"click"}]},add_password_modal:{page:"*",steps:[{select:".action_bar_right .btn:contains('Add Password')",action:"click",time:600},{select:".form form input[type=submit]",action:"click",time:1200}]}},custom_fields:{add_template:{page:"*",steps:[{select:".cft_add_new_button",action:"click",waitUntil:true},{select:".cft_add_template_group",action:"click",waitUntil:true}]}},projects:{create_from_template:{page:"*",steps:[{select:".dropdown-group[data-dropdown-action='hover'] a:first-of-type",action:"click"},{action:"runCode",code:'$("#step_1").hide(); $("#step_4").show();',waitUntil:".form form"}]}},wikis:{add:{page:"*",steps:[{select:".btn.btn-positive.fkit_modal",action:"click"}]}},widgets:{create_widget:{page:"*",steps:[{select:".fkit_modal:contains('Create Widget')",action:"click",time:300},{action:"runCode",code:'$("#app_type").val(1); $("#app_type").trigger("change");',time:1100}]}}};var a=fkit.helper.tester.tests});fkit.helper.tester=new (function(){var self=this;self.tests=[];self.add=function(arr){self.tests.push(arr)};self.runSteps=function(steps){$.each(steps,function(i,step){function runStep(){if(step.action==="click"){$(step.select).trigger(step.action);console.log("%c Ran:  $("+step.select+").trigger("+step.action+")","background-color:green; color:white;")}else{if(step.action==="runCode"){eval(step.code);console.log("%c Ran: code","background-color:green; color:white;")}}}if(step.waitUntil){$(typeof step.waitUntil==="string"?step.waitUntil:step.select).waitUntilExists(function(){runStep();console.log("%c Ran:  $("+step.select+").trigger("+step.action+")","background-color:green; color:white;")})}else{if(step.time){setTimeout(function(){runStep();steps.splice(i,1);self.runSteps(steps)},step.time);return false}else{runStep()}}})};self.run=function(test){var passed_tests=typeof test==="array"?test:test==="*"?self.tests:[test];$.each(passed_tests,function(test_index,test_run){console.log(":desc: ",test_run);self.runSteps(test_run.steps)})};self.waitUntil=function(){}});(function(f,c){var a={};var b=function(g){if(a[g]){c.clearInterval(a[g]);a[g]=null}};var d="waitUntilExists.found";f.fn.waitUntilExists=function(l,j,h){var g=this.selector;var m=f(g);var k=m.not(function(){return f(this).data(d)});if(l==="remove"){b(g)}else{k.each(l).data(d,true);if(j&&m.length){b(g)}else{if(!h){a[g]=c.setInterval(function(){m.waitUntilExists(l,j,true)},500)}}}return m}}(jQuery,window));(function(w){function g(){try{return b in w&&w[b]}catch(a){return !1}}var A={},j=w.document,b="localStorage",m="script",B;A.disabled=!1,A.set=function(c,a){},A.get=function(a){},A.remove=function(a){},A.clear=function(){},A.transact=function(f,h,c){var a=A.get(f);c==null&&(c=h,h=null),typeof a=="undefined"&&(a=h||{}),c(a),A.set(f,a)},A.getAll=function(){},A.forEach=function(){},A.serialize=function(a){return JSON.stringify(a)},A.deserialize=function(c){if(typeof c!="string"){return undefined}try{return JSON.parse(c)}catch(a){return c||undefined}};if(g()){B=w[b],A.set=function(a,c){return c===undefined?A.remove(a):(B.setItem(a,A.serialize(c)),c)},A.get=function(a){return A.deserialize(B.getItem(a))},A.remove=function(a){B.removeItem(a)},A.clear=function(){B.clear()},A.getAll=function(){var a={};return A.forEach(function(c,f){a[c]=f}),a},A.forEach=function(c){for(var f=0;f<B.length;f++){var a=B.key(f);c(a,A.get(a))}}}else{if(j.documentElement.addBehavior){var z,y;try{y=new ActiveXObject("htmlfile"),y.open(),y.write("<"+m+">document.w=window</"+m+'><iframe src="/favicon.ico"></iframe>'),y.close(),z=y.w.frames[0].document,B=z.createElement("div")}catch(v){B=j.createElement("div"),z=j.body}function k(a){return function(){var f=Array.prototype.slice.call(arguments,0);f.unshift(B),z.appendChild(B),B.addBehavior("#default#userData"),B.load(b);var c=a.apply(A,f);return z.removeChild(B),c}}var x=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function q(a){return a.replace(/^d/,"___$&").replace(x,"___")}A.set=k(function(c,f,a){return f=q(f),a===undefined?A.remove(f):(c.setAttribute(f,A.serialize(a)),c.save(b),a)}),A.get=k(function(a,c){return c=q(c),A.deserialize(a.getAttribute(c))}),A.remove=k(function(c,a){a=q(a),c.removeAttribute(a),c.save(b)}),A.clear=k(function(f){var c=f.XMLDocument.documentElement.attributes;f.load(b);for(var h=0,a;a=c[h];h++){f.removeAttribute(a.name)}f.save(b)}),A.getAll=function(a){var c={};return A.forEach(function(h,f){c[h]=f}),c},A.forEach=k(function(h,l){var f=h.XMLDocument.documentElement.attributes;for(var a=0,c;c=f[a];++a){l(c.name,A.deserialize(h.getAttribute(c.name)))}})}}try{var d="__storejs__";A.set(d,d),A.get(d)!=d&&(A.disabled=!0),A.remove(d)}catch(v){A.disabled=!0}A.enabled=!A.disabled,typeof module!="undefined"&&module.exports&&this.module!==module?module.exports=A:typeof define=="function"&&define.amd?define(A):w.store=A})(Function("return this")());var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,c=function(g,f){g=String(g);f=f||2;while(g.length<f){g="0"+g}return g};return function(k,x,t){var h=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(k)=="[object String]"&&!/\d/.test(k)){x=k;k=undefined}k=k?new Date(k):new Date;if(isNaN(k)){throw SyntaxError("invalid date")}x=String(h.masks[x]||x||h.masks["default"]);if(x.slice(0,4)=="UTC:"){x=x.slice(4);t=true}var v=t?"getUTC":"get",p=k[v+"Date"](),f=k[v+"Day"](),l=k[v+"Month"](),r=k[v+"FullYear"](),u=k[v+"Hours"](),n=k[v+"Minutes"](),w=k[v+"Seconds"](),q=k[v+"Milliseconds"](),g=t?0:k.getTimezoneOffset(),j={d:p,dd:c(p),ddd:h.i18n.dayNames[f],dddd:h.i18n.dayNames[f+7],m:l+1,mm:c(l+1),mmm:h.i18n.monthNames[l],mmmm:h.i18n.monthNames[l+12],yy:String(r).slice(2),yyyy:r,h:u%12||12,hh:c(u%12||12),H:u,HH:c(u),M:n,MM:c(n),s:w,ss:c(w),l:c(q,3),L:c(q>99?Math.round(q/10):q),t:u<12?"a":"p",tt:u<12?"am":"pm",T:u<12?"A":"P",TT:u<12?"AM":"PM",Z:t?"UTC":(String(k).match(b)||[""]).pop().replace(d,""),o:(g>0?"-":"+")+c(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!=10)*p%10]};return x.replace(a,function(m){return m in j?j[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){return dateFormat(this,a,b)};(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&typeof module.exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(d){d.timeago=function(j){if(j instanceof Date){return a(j)}else{if(typeof j==="string"){return a(d.timeago.parse(j))}else{if(typeof j==="number"){return a(new Date(j))}else{return a(d.timeago.datetime(j))}}}};var h=d.timeago;d.extend(d.timeago,{settings:{refreshMillis:60000,allowPast:true,allowFuture:false,localeTitle:false,cutoff:0,autoDispose:true,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(p){if(!this.settings.allowPast&&!this.settings.allowFuture){throw"timeago allowPast and allowFuture settings can not both be set to false."}var q=this.settings.strings;var m=q.prefixAgo;var u=q.suffixAgo;if(this.settings.allowFuture){if(p<0){m=q.prefixFromNow;u=q.suffixFromNow}}if(!this.settings.allowPast&&p>=0){return this.settings.strings.inPast}var s=Math.abs(p)/1000;var j=s/60;var r=j/60;var t=r/24;var n=t/365;function l(v,x){var w=d.isFunction(v)?v(x,p):v;var y=(q.numbers&&q.numbers[x])||x;return w.replace(/%d/i,y)}var o=s<45&&l(q.seconds,Math.round(s))||s<90&&l(q.minute,1)||j<45&&l(q.minutes,Math.round(j))||j<90&&l(q.hour,1)||r<24&&l(q.hours,Math.round(r))||r<42&&l(q.day,1)||t<30&&l(q.days,Math.round(t))||t<45&&l(q.month,1)||t<365&&l(q.months,Math.round(t/30))||n<1.5&&l(q.year,1)||l(q.years,Math.round(n));var k=q.wordSeparator||"";if(q.wordSeparator===undefined){k=" "}return d.trim([m,o,u].join(k))},parse:function(k){var j=d.trim(k);j=j.replace(/\.\d+/,"");j=j.replace(/-/,"/").replace(/-/,"/");j=j.replace(/T/," ").replace(/Z/," UTC");j=j.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");j=j.replace(/([\+\-]\d\d)$/," $100");return new Date(j)},datetime:function(k){var j=h.isTime(k)?d(k).attr("datetime"):d(k).attr("title");return h.parse(j)},isTime:function(j){return d(j).get(0).tagName.toLowerCase()==="time"}});var f={init:function(){f.dispose.call(this);var k=d.proxy(c,this);k();var j=h.settings;if(j.refreshMillis>0){this._timeagoInterval=setInterval(k,j.refreshMillis)}},update:function(k){var j=(k instanceof Date)?k:h.parse(k);d(this).data("timeago",{datetime:j});if(h.settings.localeTitle){d(this).attr("title",j.toLocaleString())}c.apply(this)},updateFromDOM:function(){d(this).data("timeago",{datetime:h.parse(h.isTime(this)?d(this).attr("datetime"):d(this).attr("title"))});c.apply(this)},dispose:function(){if(this._timeagoInterval){window.clearInterval(this._timeagoInterval);this._timeagoInterval=null}}};d.fn.timeago=function(l,j){var k=l?f[l]:f.init;if(!k){throw new Error("Unknown function name '"+l+"' for timeago")}this.each(function(){k.call(this,j)});return this};function c(){var j=h.settings;if(j.autoDispose&&!d.contains(document.documentElement,this)){d(this).timeago("dispose");return this}var k=b(this);if(!isNaN(k.datetime)){if(j.cutoff===0||Math.abs(g(k.datetime))<j.cutoff){d(this).text(a(k.datetime))}else{if(d(this).attr("title").length>0){d(this).text(d(this).attr("title"))}}}return this}function b(j){j=d(j);if(!j.data("timeago")){j.data("timeago",{datetime:h.datetime(j)});var k=d.trim(j.text());if(h.settings.localeTitle){j.attr("title",j.data("timeago").datetime.toLocaleString())}else{if(k.length>0&&!(h.isTime(j)&&j.attr("title"))){j.attr("title",k)}}}return j.data("timeago")}function a(j){return h.inWords(g(j))}function g(j){return(new Date().getTime()-j.getTime())}document.createElement("abbr");document.createElement("time")}));if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){fc.isMobileVersion=true;if(!navigator.userAgent.match(/iPad/i)){fc.isIpad=false;$("body").addClass("fc_mobile").removeClass("fc_side_minimized_hide")}else{fc.isIpad=true;$("body").addClass("fc_mobile_ipad");setTimeout(function(){fc.sideBarCollapse(false)},500)}$(function(){if(typeof fkit!=="undefined"){fkit.destroyPlugins()}});ckeditor_standard_options=ckeditor_advanced_options={toolbar:[["Bold","Italic","Underline","Link","RemoveFormat"]],uiColor:"#F0F0F0",autoGrow_onStartup:false,resize_enabled:false,autoGrow_bottomSpace:"0",autoGrow_maxHeight:180,height:"180px",width:"95%",fillEmptyBlocks:false,IgnoreEmptyParagraphValue:true,AutoParagraph:false,indentClasses:["ck_indent1","ck_indent2","ck_indent3"],contentsCss:[CKEDITOR_BASEPATH+"contents.css?ver=2",cdn_url+"platform/css/editor.css"],disableNativeSpellChecker:false,removePlugins:ckeditor_remove_plugins,extraAllowedContent:ckeditor_extra_allowed_content};$(function(){$(document).on("tap",".td_group .td .td_content",function(a){a.preventDefault();window.location=$(this).find(".tag_comments").attr("href")})});$(".tip").each(function(a){$(this).removeClass("tip")});if(!!window.navigator.standalone){$("#applications .active a").removeAttr("href");$("a").on("mouseenter click",function(b){var a=$(this).attr("href");if(!(typeof a==="undefined")&&!$(this).hasClass("fc_project_link")){b.preventDefault();window.location=a}})}}else{fc.isMobileVersion=false;fc.isIpad=false}var fc_upsells={};if(typeof user_upsells==="undefined"){var user_upsells=[]}fc_upsells.user_seen=user_upsells;fc_upsells.shown_upsell="";fc_upsells.mark_seen=function(a){fc_upsells.user_seen.push(a);ajaxRequest(base_url+"manage/account/set_data",{type:"user_upsells",value:JSON.stringify(fc_upsells.user_seen)})};fc_upsells.clear_seen=function(){fc_upsells.user_seen=[];ajaxRequest(base_url+"manage/account/set_data",{type:"user_upsells",value:"[]"})};fc_upsells.has_seen=function(a){return fc_upsells.user_seen.indexOf(a)>=0};fc_upsells.get_upsell_url=function(a){return base_url+"upsells/show_upsell?upsell_name="+a};fc_upsells.show_upsell=function(a){if(fc_upsells.has_seen(a)){return}fkit.open_modal({href:fc_upsells.get_upsell_url(a),width:"800"})};fc_upsells.get_upsell_html=function(a,b){ajaxRequest(fc_upsells.get_upsell_url(a),{},function(c){b(c)})};$(function(){$(document).on("click","#upsell-btn-accept, #upsell-btn-decline",function(){var d=$(this).attr("id")=="upsell-btn-accept"?"accept_upsell_action":"decline_upsell_action";var c=d=="accept_upsell_action";fc.keep_ajax_cover=true;fc.addAjaxCoverToModalForm();ajaxRequest(base_url+"upsells/"+d,{upsell_name:fc_upsells.shown_upsell,trial_plan_id:c?$(this).data("trial-plan-id"):null},function(f){if(f.status!="success"){$.flash_action(f.message);return}fc_upsells.mark_seen(fc_upsells.shown_upsell);a(c)})});function b(){fkit.modal_opened.modal_full_reload=true;fkit.modal_opened.ajaxLoad(function(){fc.keep_ajax_cover=false;fkit.modal_opened.modal_full_reload=false})}function a(c){switch(fc_upsells.shown_upsell){case"subtaskspro":b();if(c){fcif.reapply_filters()}break;case"copy_task":b();break;case"drives":fkit.modal_opened.fkit_modal_close();$(".upsell_drive_actions").remove();if(c){$(".real_drive_actions").show();setTimeout(function(){fc.highlight_elements($(".real_drive_actions"))},750)}break;case"email_in":if(c){b()}else{fkit.modal_opened.fkit_modal_close();$("#email_in_dialog_generator").remove()}break;case"tasks_start_date":case"tasks_recurrence":$(".todo_main_content").show();$(".todo_upsell_content").html("");if(c){if(fc_upsells.shown_upsell=="tasks_start_date"){$("#real_start_date_container").show();$("#upsell_start_date_container").hide();fc.highlight_elements($("#real_start_date_container input"))}else{$("#real_recurrence_container").show();$("#upsell_recurrence_container").hide()}}else{if(fc_upsells.shown_upsell=="tasks_start_date"){$(".todo_start_date_container").remove()}else{$("#real_recurrence_container, #upsell_recurrence_container").remove()}}$(".add_or_edit_task_form").removeAttr("data-ignore-unsaved-changes");fc.removeAjaxCoverFromModalForm();break}}});